var te=Object.defineProperty;var se=(c,s,t)=>s in c?te(c,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):c[s]=t;var z=(c,s,t)=>se(c,typeof s!="symbol"?s+"":s,t);import{j as e,r as d,a8 as re,a9 as le}from"./vendor.1762541069955.BMnP9qq1.js";import{Y as x,j as w,t as k,v as S,k as N,Z as U,B as C,T as R,a0 as X,a1 as q,a2 as L,a3 as M,a4 as G,a5 as E,I as K,A as V,f as Q,Q as ne,a6 as ee,u as f,a7 as ie,G as ce,W as H,o as oe,O as de,e as me,N as xe,l as he,m as pe,n as J,s as Z}from"./trading.1762541069955.DOlCN3UG.js";import"./charts.1762541069955.ZSNfHYSo.js";class ue{constructor(){z(this,"baseUrls",{BINANCE:"https://api.binance.com/api/v3",OKX:"https://www.okx.com/api/v5",KUCOIN:"https://api.kucoin.com/api/v1",COINBASE:"https://api.exchange.coinbase.com",BYBIT:"https://api.bybit.com/v5",KRAKEN:"https://api.kraken.com/0",HUOBI:"https://api.huobi.pro",GATE:"https://api.gateio.ws/api/v4",MEXC:"https://api.mexc.com/api/v3",BITGET:"https://api.bitget.com/api/spot/v1",NASDAQ:"https://api.polygon.io/v2",NYSE:"https://api.polygon.io/v2",FOREX:"https://api.fxpractice.oanda.com/v3",COMMODITIES:"https://api.marketdata.app/v1",CRYPTO_FUTURES:"https://fapi.binance.com/fapi/v1"})}async getRealTimePrice(s,t){try{switch(s){case"BINANCE":return await this.getBinancePrice(t);case"OKX":return await this.getOKXPrice(t);case"KUCOIN":return await this.getKuCoinPrice(t);case"COINBASE":return await this.getCoinbasePrice(t);case"BYBIT":return await this.getBybitPrice(t);case"KRAKEN":return await this.getKrakenPrice(t);case"NASDAQ":case"NYSE":return await this.getStockPrice(t);case"FOREX":return await this.getForexPrice(t);case"COMMODITIES":return await this.getCommodityPrice(t);default:throw new Error(`Exchange ${s} not supported`)}}catch(a){throw console.error(`Error fetching price for ${t} on ${s}:`,a),a}}async getBinancePrice(s){const t=await fetch(`${this.baseUrls.BINANCE}/ticker/24hr?symbol=${s.toUpperCase()}`);if(!t.ok)throw new Error("Failed to fetch Binance price");const a=await t.json();return{symbol:a.symbol,price:parseFloat(a.lastPrice),change24h:parseFloat(a.priceChangePercent),volume24h:parseFloat(a.volume),high24h:parseFloat(a.highPrice),low24h:parseFloat(a.lowPrice),timestamp:Date.now()}}async getOKXPrice(s){const t=await fetch(`${this.baseUrls.OKX}/market/ticker?instId=${s.toUpperCase()}`);if(!t.ok)throw new Error("Failed to fetch OKX price");const r=(await t.json()).data[0];return{symbol:r.instId,price:parseFloat(r.last),change24h:parseFloat(r.changePercent)*100,volume24h:parseFloat(r.vol24h),high24h:parseFloat(r.high24h),low24h:parseFloat(r.low24h),timestamp:Date.now()}}async getKuCoinPrice(s){const t=await fetch(`${this.baseUrls.KUCOIN}/market/stats?symbol=${s.toUpperCase()}`);if(!t.ok)throw new Error("Failed to fetch KuCoin price");const r=(await t.json()).data;return{symbol:r.symbol,price:parseFloat(r.last),change24h:parseFloat(r.changeRate)*100,volume24h:parseFloat(r.vol),high24h:parseFloat(r.high),low24h:parseFloat(r.low),timestamp:Date.now()}}async getCoinbasePrice(s){const t=s.toUpperCase().replace("USDT","-USD"),a=await fetch(`${this.baseUrls.COINBASE}/products/${t}/stats`);if(!a.ok)throw new Error("Failed to fetch Coinbase price");const r=await a.json();return{symbol:t,price:parseFloat(r.last),change24h:(parseFloat(r.last)-parseFloat(r.open))/parseFloat(r.open)*100,volume24h:parseFloat(r.volume),high24h:parseFloat(r.high),low24h:parseFloat(r.low),timestamp:Date.now()}}async getBybitPrice(s){const t=await fetch(`${this.baseUrls.BYBIT}/market/tickers?category=spot&symbol=${s.toUpperCase()}`);if(!t.ok)throw new Error("Failed to fetch Bybit price");const r=(await t.json()).result.list[0];return{symbol:r.symbol,price:parseFloat(r.lastPrice),change24h:parseFloat(r.price24hPcnt)*100,volume24h:parseFloat(r.volume24h),high24h:parseFloat(r.highPrice24h),low24h:parseFloat(r.lowPrice24h),timestamp:Date.now()}}async getKrakenPrice(s){const t=s.toUpperCase().replace("USDT","USD"),a=await fetch(`${this.baseUrls.KRAKEN}/public/Ticker?pair=${t}`);if(!a.ok)throw new Error("Failed to fetch Kraken price");const r=await a.json(),l=Object.keys(r.result)[0],n=r.result[l];return{symbol:t,price:parseFloat(n.c[0]),change24h:(parseFloat(n.c[0])-parseFloat(n.o))/parseFloat(n.o)*100,volume24h:parseFloat(n.v[1]),high24h:parseFloat(n.h[1]),low24h:parseFloat(n.l[1]),timestamp:Date.now()}}async getStockPrice(s){const a=await fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${s}&apikey=demo`);if(!a.ok)throw new Error("Failed to fetch stock price");const l=(await a.json())["Global Quote"];return{symbol:l["01. symbol"],price:parseFloat(l["05. price"]),change24h:parseFloat(l["10. change percent"].replace("%","")),volume24h:parseFloat(l["06. volume"]),high24h:parseFloat(l["03. high"]),low24h:parseFloat(l["04. low"]),timestamp:Date.now()}}async getForexPrice(s){const[t,a]=s.split("_"),r=await fetch(`https://api.exchangerate-api.com/v4/latest/${t}`);if(!r.ok)throw new Error("Failed to fetch forex price");const n=(await r.json()).rates[a];return{symbol:s,price:n,change24h:Math.random()*2-1,volume24h:0,high24h:n*1.01,low24h:n*.99,timestamp:Date.now()}}async getCommodityPrice(s){const t=await fetch(`https://api.marketdata.app/v1/stocks/quotes/${s}/`);if(!t.ok)throw new Error("Failed to fetch commodity price");const a=await t.json();return{symbol:s,price:a.last,change24h:a.change_percent,volume24h:a.volume,high24h:a.high,low24h:a.low,timestamp:Date.now()}}createWebSocketConnection(s,t,a){try{switch(s){case"BINANCE":return this.createBinanceWebSocket(t,a);case"OKX":return this.createOKXWebSocket(t,a);case"KUCOIN":return this.createKuCoinWebSocket(t,a);default:return console.warn(`WebSocket not supported for ${s}`),null}}catch(r){return console.error(`Error creating WebSocket for ${t} on ${s}:`,r),null}}createBinanceWebSocket(s,t){const a=new WebSocket(`wss://stream.binance.com:9443/ws/${s.toLowerCase()}@ticker`);return a.onmessage=r=>{const l=JSON.parse(r.data);t({symbol:l.s,price:parseFloat(l.c),change24h:parseFloat(l.P),volume24h:parseFloat(l.v),high24h:parseFloat(l.h),low24h:parseFloat(l.l),timestamp:Date.now()})},a}createOKXWebSocket(s,t){const a=new WebSocket("wss://ws.okx.com:8443/ws/v5/public");return a.onopen=()=>{a.send(JSON.stringify({op:"subscribe",args:[{channel:"tickers",instId:s.toUpperCase()}]}))},a.onmessage=r=>{const l=JSON.parse(r.data);if(l.data){const n=l.data[0];t({symbol:n.instId,price:parseFloat(n.last),change24h:parseFloat(n.changePercent)*100,volume24h:parseFloat(n.vol24h),high24h:parseFloat(n.high24h),low24h:parseFloat(n.low24h),timestamp:Date.now()})}},a}createKuCoinWebSocket(s,t){const a=new WebSocket("wss://ws-api-spot.kucoin.com/");return a.onopen=()=>{a.send(JSON.stringify({id:Date.now(),type:"subscribe",topic:`/market/ticker:${s.toUpperCase()}`,response:!0}))},a.onmessage=r=>{const l=JSON.parse(r.data);if(l.data){const n=l.data;t({symbol:n.symbol,price:parseFloat(n.price),change24h:parseFloat(n.changeRate)*100,volume24h:parseFloat(n.vol),timestamp:Date.now()})}},a}}const Y=new ue;class ge{async getUserProfile(s){const{data:t,error:a}=await x.from("user_profiles").select("*").eq("id",s).single();return a?(console.error("Error fetching user profile:",a),null):t}async updateUserProfile(s,t){const{error:a}=await x.from("user_profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",s);return a?(console.error("Error updating user profile:",a),!1):!0}async updateNXTBalance(s,t,a){const{data:r}=await x.from("user_profiles").select("nxt_balance").eq("id",s).single();if(!r)return!1;const l=a==="add"?r.nxt_balance+t:r.nxt_balance-t;return l<0?!1:await this.updateUserProfile(s,{nxt_balance:l})}async createTokenTransaction(s){const{data:t,error:a}=await x.from("token_transactions").insert({...s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();return a?(console.error("Error creating token transaction:",a),null):t.id}async getTokenTransactions(s,t){let a=x.from("token_transactions").select("*");s&&(a=a.eq("user_id",s)),t&&(a=a.eq("status",t)),a=a.order("created_at",{ascending:!1});const{data:r,error:l}=await a;return l?(console.error("Error fetching token transactions:",l),[]):r||[]}async updateTokenTransactionStatus(s,t,a){const{error:r}=await x.from("token_transactions").update({status:t,admin_notes:a,updated_at:new Date().toISOString()}).eq("id",s);if(r)return console.error("Error updating token transaction:",r),!1;if(t==="confirmed"){const{data:l}=await x.from("token_transactions").select("user_id, nxt_amount").eq("id",s).single();l&&await this.updateNXTBalance(l.user_id,l.nxt_amount,"add")}return!0}async createTradingOrder(s){const t=await this.getUserProfile(s.user_id);if(!t||t.nxt_balance<s.nxt_used)return null;await this.updateNXTBalance(s.user_id,s.nxt_used,"subtract");const{data:a,error:r}=await x.from("trading_orders").insert({...s,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select("id").single();return r?(console.error("Error creating trading order:",r),await this.updateNXTBalance(s.user_id,s.nxt_used,"add"),null):(await this.updateUserProfile(s.user_id,{total_trades:(t.total_trades||0)+1,total_volume:(t.total_volume||0)+s.total,total_commission_paid:(t.total_commission_paid||0)+s.commission}),a.id)}async getTradingOrders(s,t){let a=x.from("trading_orders").select("*");s&&(a=a.eq("user_id",s)),t&&(a=a.eq("exchange",t)),a=a.order("created_at",{ascending:!1});const{data:r,error:l}=await a;return l?(console.error("Error fetching trading orders:",l),[]):r||[]}async updateTradingOrderStatus(s,t,a,r){const{error:l}=await x.from("trading_orders").update({status:t,filled_amount:a,filled_price:r,updated_at:new Date().toISOString()}).eq("id",s);return l?(console.error("Error updating trading order:",l),!1):!0}async createTradingSignal(s){const{data:t,error:a}=await x.from("trading_signals").insert({...s,created_at:new Date().toISOString()}).select("id").single();return a?(console.error("Error creating trading signal:",a),null):t.id}async getTradingSignals(s,t){let a=x.from("trading_signals").select("*").gt("expires_at",new Date().toISOString());s&&(a=a.eq("exchange",s)),t&&(a=a.eq("symbol",t)),a=a.order("confidence",{ascending:!1});const{data:r,error:l}=await a;return l?(console.error("Error fetching trading signals:",l),[]):r||[]}async createArbitrageOpportunity(s){const{data:t,error:a}=await x.from("arbitrage_opportunities").insert({...s,created_at:new Date().toISOString()}).select("id").single();return a?(console.error("Error creating arbitrage opportunity:",a),null):t.id}async getArbitrageOpportunities(s){let t=x.from("arbitrage_opportunities").select("*").gt("expires_at",new Date().toISOString());s&&(t=t.eq("symbol",s)),t=t.order("profit_percentage",{ascending:!1});const{data:a,error:r}=await t;return r?(console.error("Error fetching arbitrage opportunities:",r),[]):a||[]}async createNewsItem(s){const{data:t,error:a}=await x.from("news_items").insert({...s,created_at:new Date().toISOString()}).select("id").single();return a?(console.error("Error creating news item:",a),null):t.id}async getNewsItems(s,t=50){let a=x.from("news_items").select("*");s&&s.length>0&&(a=a.overlaps("related_symbols",s)),a=a.order("created_at",{ascending:!1}).limit(t);const{data:r,error:l}=await a;return l?(console.error("Error fetching news items:",l),[]):r||[]}async getPlatformStats(){const[{count:s},{count:t},{count:a},{data:r}]=await Promise.all([x.from("user_profiles").select("*",{count:"exact",head:!0}),x.from("token_transactions").select("*",{count:"exact",head:!0}),x.from("trading_orders").select("*",{count:"exact",head:!0}),x.from("trading_orders").select("total").eq("status","filled")]),l=(r==null?void 0:r.reduce((n,g)=>n+g.total,0))||0;return{totalUsers:s||0,totalTransactions:t||0,totalOrders:a||0,totalVolume:l,timestamp:new Date().toISOString()}}async getUserTradingStats(s){var n,g,b;const[{data:t},{data:a}]=await Promise.all([x.from("trading_orders").select("*").eq("user_id",s),x.from("user_profiles").select("*").eq("id",s).single()]),r=(t==null?void 0:t.filter(v=>v.status==="filled"))||[],l=r.reduce((v,u)=>v+(u.side==="buy"?-u.total:u.total),0);return{totalOrders:(t==null?void 0:t.length)||0,filledOrders:r.length,totalVolume:((n=a==null?void 0:a.data)==null?void 0:n.total_volume)||0,totalCommissionPaid:((g=a==null?void 0:a.data)==null?void 0:g.total_commission_paid)||0,estimatedPnL:l,nxtBalance:((b=a==null?void 0:a.data)==null?void 0:b.nxt_balance)||0}}subscribeToTokenTransactions(s){return x.channel("token_transactions").on("postgres_changes",{event:"*",schema:"public",table:"token_transactions"},s).subscribe()}subscribeToPriceAlerts(s,t){return x.channel(`price_alerts_${s}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"price_alerts",filter:`user_id=eq.${s}`},t).subscribe()}}const D=new ge;function be({symbol:c,userId:s}){return e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Binance Tools"})}),e.jsx(N,{children:e.jsx("p",{children:"Generic tools will be available soon."})})]})})}function je({symbol:c,userId:s}){return e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"OKX Tools"})}),e.jsx(N,{children:e.jsx("p",{children:"Generic tools will be available soon."})})]})})}function ye({symbol:c,userId:s}){return e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"Bybit Tools"})}),e.jsx(N,{children:e.jsx("p",{children:"Generic tools will be available soon."})})]})})}function fe({symbol:c,userId:s}){return e.jsx("div",{className:"flex flex-col gap-4 p-4",children:e.jsxs(w,{children:[e.jsx(k,{children:e.jsx(S,{children:"KuCoin Tools"})}),e.jsx(N,{children:e.jsx("p",{children:"Generic tools will be available soon."})})]})})}function we({exchange:c,symbol:s,userId:t,onError:a}){try{switch(c){case"BINANCE":return e.jsx(be,{symbol:s,userId:t});case"OKX":return e.jsx(je,{symbol:s,userId:t});case"BYBIT":return e.jsx(ye,{symbol:s,userId:t});case"KUCOIN":return e.jsx(fe,{symbol:s,userId:t});default:return e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400",children:"Bu borsa için özel araçlar henüz mevcut değil"}),e.jsxs("p",{className:"text-red-400/60 text-sm mt-1",children:["Exchange: ",c]})]})}}catch(r){return a==null||a(r),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-red-400",children:"Borsa araçları yüklenirken bir hata oluştu"}),e.jsx("p",{className:"text-red-400/60 text-sm mt-1",children:r.message})]})}}const Ne=[{type:"MARKET",label:"Market",description:"Anında işlem"},{type:"LIMIT",label:"Limit",description:"Belirli fiyatta işlem"},{type:"STOP_LOSS",label:"Stop Loss",description:"Zarar durdurma"},{type:"TAKE_PROFIT",label:"Take Profit",description:"Kar alma"},{type:"OCO",label:"OCO",description:"One-Cancels-Other"},{type:"ICEBERG",label:"Iceberg",description:"Gizli büyük emir"}];function ve({symbol:c,userId:s}){const[t,a]=d.useState(null),[r,l]=d.useState("BUY"),[n,g]=d.useState("LIMIT"),[b,v]=d.useState(""),[u,F]=d.useState(""),[B,y]=d.useState(""),[I,P]=d.useState(""),[A,O]=d.useState("GTC"),[$,h]=d.useState(!1);d.useEffect(()=>{o();const m=setInterval(o,1e3);return()=>clearInterval(m)},[c]);const o=async()=>{try{const m=await Y.getRealTimePrice("BINANCE",c);a(m),n==="MARKET"&&F(m.price.toFixed(2))}catch(m){console.error("Error loading price data:",m)}},i=()=>!b||!u?0:parseFloat(b)*parseFloat(u),T=()=>{const _=i()*.001,W=_*.25;return{standard:_,withBNB:_-W,nxtRequired:W/.1}},p=async()=>{if(!b||!u&&n!=="MARKET"){f.error("Lütfen gerekli alanları doldurun");return}h(!0);try{const m=T(),_=await D.createTradingOrder({user_id:s,exchange:"BINANCE",symbol:c,side:r.toLowerCase(),order_type:n.toLowerCase(),amount:parseFloat(b),price:parseFloat(u),total:i(),commission:m.withBNB,nxt_used:m.nxtRequired,status:"pending"});_&&(f.success(`Binance ${n} ${r} emri yerleştirildi!`),v(""),n!=="MARKET"&&F(""),y(""),P(""),setTimeout(async()=>{Math.random()>.05?(await D.updateTradingOrderStatus(_,"filled",parseFloat(b),parseFloat(u)),f.success(`${r} emri tamamlandı!`)):(await D.updateTradingOrderStatus(_,"rejected"),f.error("Emir reddedildi - Binance API hatası"))},Math.random()*3e3+1e3))}catch(m){console.error("Error placing Binance order:",m),f.error("Binance emir yerleştirme hatası")}finally{h(!1)}},j=T();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{className:"bg-gradient-to-r from-yellow-500/10 to-orange-500/10 border-yellow-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-yellow-400 flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-yellow-500/20",children:e.jsx("span",{className:"text-yellow-400 font-bold text-sm",children:"B"})}),"Binance Spot Trading"]})}),e.jsx(N,{children:t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-yellow-400/60 uppercase",children:"Fiyat"}),e.jsxs("p",{className:"text-xl font-bold text-yellow-400",children:["$",t.price.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-400/60 uppercase",children:"24h Değişim"}),e.jsxs("p",{className:`text-lg font-bold ${t.change24h>=0?"text-green-400":"text-red-400"}`,children:[t.change24h>=0?"+":"",t.change24h.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-400/60 uppercase",children:"24h Hacim"}),e.jsx("p",{className:"text-lg font-bold text-blue-400",children:t.volume24h})]}),e.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-purple-400/60 uppercase",children:"Spread"}),e.jsx("p",{className:"text-lg font-bold text-purple-400",children:"0.01%"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"bg-black/40 border-yellow-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-yellow-400 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Binance Emir Ver"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(C,{variant:r==="BUY"?"default":"outline",onClick:()=>l("BUY"),className:`${r==="BUY"?"bg-green-500 hover:bg-green-600 text-white":"border-green-500/50 text-green-400 hover:bg-green-500/10"}`,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"BUY"]}),e.jsxs(C,{variant:r==="SELL"?"default":"outline",onClick:()=>l("SELL"),className:`${r==="SELL"?"bg-red-500 hover:bg-red-600 text-white":"border-red-500/50 text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"SELL"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Emir Tipi"}),e.jsxs(q,{value:n,onValueChange:m=>g(m),children:[e.jsx(L,{className:"bg-black/40 border-yellow-500/20 text-yellow-400",children:e.jsx(M,{})}),e.jsx(G,{className:"bg-black/90 border-yellow-500/20",children:Ne.map(m=>e.jsx(E,{value:m.type,className:"text-yellow-400 hover:bg-yellow-500/10",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:m.label}),e.jsx("div",{className:"text-xs text-yellow-400/60",children:m.description})]})},m.type))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Miktar"}),e.jsx(K,{type:"number",placeholder:"Miktar",value:b,onChange:m=>v(m.target.value),className:"bg-black/40 border-yellow-500/20 text-yellow-400",step:"0.00001"})]}),n!=="MARKET"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Fiyat"}),e.jsx(K,{type:"number",placeholder:"Fiyat",value:u,onChange:m=>F(m.target.value),className:"bg-black/40 border-yellow-500/20 text-yellow-400",step:"0.01"})]}),(n==="STOP_LOSS"||n==="TAKE_PROFIT"||n==="OCO")&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Stop Fiyatı"}),e.jsx(K,{type:"number",placeholder:"Stop fiyatı",value:B,onChange:m=>y(m.target.value),className:"bg-black/40 border-yellow-500/20 text-yellow-400",step:"0.01"})]}),n==="ICEBERG"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Iceberg Miktarı"}),e.jsx(K,{type:"number",placeholder:"Görünür miktar",value:I,onChange:m=>P(m.target.value),className:"bg-black/40 border-yellow-500/20 text-yellow-400",step:"0.00001"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-yellow-400/80 mb-2 block",children:"Geçerlilik Süresi"}),e.jsxs(q,{value:A,onValueChange:m=>O(m),children:[e.jsx(L,{className:"bg-black/40 border-yellow-500/20 text-yellow-400",children:e.jsx(M,{})}),e.jsxs(G,{className:"bg-black/90 border-yellow-500/20",children:[e.jsx(E,{value:"GTC",className:"text-yellow-400",children:"GTC (Good Till Cancelled)"}),e.jsx(E,{value:"IOC",className:"text-yellow-400",children:"IOC (Immediate or Cancel)"}),e.jsx(E,{value:"FOK",className:"text-yellow-400",children:"FOK (Fill or Kill)"})]})]})]}),b&&u&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"Toplam:"}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:["$",i().toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"Binance Komisyon:"}),e.jsxs("span",{className:"text-red-400",children:["$",j.standard.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"BNB ile Komisyon:"}),e.jsxs("span",{className:"text-green-400",children:["$",j.withBNB.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"NXT Gereksinimi:"}),e.jsxs("span",{className:"text-cyan-400",children:[j.nxtRequired.toFixed(2)," NXT"]})]})]})}),e.jsx(C,{onClick:p,disabled:!b||!u&&n!=="MARKET"||$,className:`w-full font-semibold ${r==="BUY"?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400":"bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-400 hover:to-rose-400"} text-white`,children:$?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"İşleniyor..."]}):e.jsxs(e.Fragment,{children:[r==="BUY"?e.jsx(R,{className:"h-4 w-4 mr-2"}):e.jsx(X,{className:"h-4 w-4 mr-2"}),r," ",n," Emri Ver"]})})]})]}),e.jsxs(w,{className:"bg-black/40 border-yellow-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-yellow-400 flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Binance Özellikleri"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ne,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{className:"text-yellow-400 font-semibold text-sm",children:"Düşük Komisyon"})]}),e.jsx("p",{className:"text-yellow-400/80 text-xs",children:"BNB ile %25 indirim"})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"h-4 w-4 text-green-400"}),e.jsx("span",{className:"text-green-400 font-semibold text-sm",children:"Hızlı İşlem"})]}),e.jsx("p",{className:"text-green-400/80 text-xs",children:"1.4 milyon TPS"})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ee,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-blue-400 font-semibold text-sm",children:"Gelişmiş Emirler"})]}),e.jsx("p",{className:"text-blue-400/80 text-xs",children:"OCO, Iceberg, Stop"})]}),e.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"h-4 w-4 text-purple-400"}),e.jsx("span",{className:"text-purple-400 font-semibold text-sm",children:"Güvenlik"})]}),e.jsx("p",{className:"text-purple-400/80 text-xs",children:"SAFU Fonu"})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:[e.jsx("h4",{className:"text-yellow-400 font-semibold mb-2",children:"Binance Avantajları:"}),e.jsxs("ul",{className:"text-yellow-400/80 text-sm space-y-1",children:[e.jsx("li",{children:"• Dünyanın en büyük kripto borsası"}),e.jsx("li",{children:"• 600+ trading çifti"}),e.jsx("li",{children:"• 24/7 müşteri desteği"}),e.jsx("li",{children:"• Mobil uygulama desteği"}),e.jsx("li",{children:"• Futures, Options, Margin trading"}),e.jsx("li",{children:"• Staking ve Earn programları"})]})]})]})]})]})]})}function ae({exchange:c,symbol:s,userId:t}){const[a,r]=d.useState(null),[l,n]=d.useState("buy"),[g,b]=d.useState("limit"),[v,u]=d.useState(""),[F,B]=d.useState(""),[y]=d.useState(1250.75),[I,P]=d.useState(!1);d.useEffect(()=>{A();const o=setInterval(A,5e3);return()=>clearInterval(o)},[c,s]);const A=async()=>{try{const o=await Y.getRealTimePrice(c,s);r(o),g==="market"&&B(o.price.toFixed(2))}catch(o){console.error("Error loading price data:",o)}},O=()=>{if(!v||!F||!a)return null;const o=parseFloat(v),i=parseFloat(F),T=o*i,p=T*.001,j=p/.1;return{side:l,amount:o,price:i,total:T,commission:p,nxtRequired:j}},$=async()=>{const o=O();if(!o){f.error("Lütfen geçerli değerler girin");return}if(y<o.nxtRequired){f.error("Yetersiz NXT bakiyesi!");return}P(!0);try{const i=await D.createTradingOrder({user_id:t,exchange:c,symbol:s,side:o.side,order_type:g,amount:o.amount,price:o.price,total:o.total,commission:o.commission,nxt_used:o.nxtRequired,status:"pending"});i&&(f.success(`${c} ${g} ${l} emri yerleştirildi!`),u(""),g!=="market"&&B(""),setTimeout(async()=>{Math.random()>.1?(await D.updateTradingOrderStatus(i,"filled",o.amount,o.price),f.success(`${l.toUpperCase()} emri tamamlandı!`)):(await D.updateTradingOrderStatus(i,"rejected"),f.error("Emir reddedildi"))},Math.random()*4e3+2e3))}catch(i){console.error("Error placing order:",i),f.error("Emir yerleştirme hatası")}finally{P(!1)}},h=O();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{className:"bg-gradient-to-r from-cyan-500/10 to-blue-500/10 border-cyan-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-cyan-400 flex items-center gap-2",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-cyan-500/20",children:e.jsx("span",{className:"text-cyan-400 font-bold text-sm",children:c.charAt(0)})}),c," Trading"]})}),e.jsx(N,{children:a&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-cyan-400/60 uppercase",children:"Fiyat"}),e.jsxs("p",{className:"text-xl font-bold text-cyan-400",children:["$",a.price.toLocaleString()]})]}),e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-green-400/60 uppercase",children:"24h Değişim"}),e.jsxs("p",{className:`text-lg font-bold ${a.change24h>=0?"text-green-400":"text-red-400"}`,children:[a.change24h>=0?"+":"",a.change24h.toFixed(2),"%"]})]}),e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-blue-400/60 uppercase",children:"24h Hacim"}),e.jsx("p",{className:"text-lg font-bold text-blue-400",children:a.volume24h})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(w,{className:"bg-black/40 border-cyan-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-cyan-400 flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5"}),"Emir Ver"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(C,{variant:l==="buy"?"default":"outline",onClick:()=>n("buy"),className:`${l==="buy"?"bg-green-500 hover:bg-green-600 text-white":"border-green-500/50 text-green-400 hover:bg-green-500/10"}`,children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"BUY"]}),e.jsxs(C,{variant:l==="sell"?"default":"outline",onClick:()=>n("sell"),className:`${l==="sell"?"bg-red-500 hover:bg-red-600 text-white":"border-red-500/50 text-red-400 hover:bg-red-500/10"}`,children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"SELL"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-cyan-400/80 mb-2 block",children:"Emir Tipi"}),e.jsxs(q,{value:g,onValueChange:o=>b(o),children:[e.jsx(L,{className:"bg-black/40 border-cyan-500/20 text-cyan-400",children:e.jsx(M,{})}),e.jsxs(G,{className:"bg-black/90 border-cyan-500/20",children:[e.jsx(E,{value:"limit",className:"text-cyan-400",children:"Limit Order"}),e.jsx(E,{value:"market",className:"text-cyan-400",children:"Market Order"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-cyan-400/80 mb-2 block",children:"Miktar"}),e.jsx(K,{type:"number",placeholder:"Miktar",value:v,onChange:o=>u(o.target.value),className:"bg-black/40 border-cyan-500/20 text-cyan-400",step:"0.00001"})]}),g==="limit"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-cyan-400/80 mb-2 block",children:"Fiyat"}),e.jsx(K,{type:"number",placeholder:"Fiyat",value:F,onChange:o=>B(o.target.value),className:"bg-black/40 border-cyan-500/20 text-cyan-400",step:"0.01"})]}),h&&e.jsx("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cyan-400/80",children:"Toplam:"}),e.jsxs("span",{className:"text-cyan-400 font-semibold",children:["$",h.total.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-cyan-400/80",children:"Komisyon:"}),e.jsxs("span",{className:"text-cyan-400",children:["$",h.commission.toFixed(4)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"NXT Gereksinimi:"}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[h.nxtRequired.toFixed(2)," NXT"]})]})]})}),h&&y<h.nxtRequired&&e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ie,{className:"h-4 w-4 text-red-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-red-400",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Yetersiz NXT Bakiyesi!"}),e.jsxs("p",{children:["Bu işlem için ",h.nxtRequired.toFixed(2)," NXT gerekli."]})]})]})}),e.jsx(C,{onClick:$,disabled:!h||y<((h==null?void 0:h.nxtRequired)||0)||I,className:`w-full font-semibold ${l==="buy"?"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-400 hover:to-emerald-400":"bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-400 hover:to-rose-400"} text-white`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"h-4 w-4 mr-2 animate-spin"}),"İşleniyor..."]}):h&&y>=h.nxtRequired?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),l.toUpperCase()," Emri Ver"]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"NXT Gerekli"]})})]})]}),e.jsxs(w,{className:"bg-black/40 border-cyan-500/20 backdrop-blur-xl",children:[e.jsx(k,{children:e.jsxs(S,{className:"text-cyan-400 flex items-center gap-2",children:[e.jsx(oe,{className:"h-5 w-5"}),c," Bilgileri"]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"bg-cyan-500/10 border border-cyan-500/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-cyan-400 font-semibold mb-2",children:[c," Özellikleri:"]}),e.jsxs("ul",{className:"text-cyan-400/80 text-sm space-y-1",children:[e.jsx("li",{children:"• Güvenli ve hızlı işlemler"}),e.jsx("li",{children:"• Düşük komisyon oranları"}),e.jsx("li",{children:"• 24/7 müşteri desteği"}),e.jsx("li",{children:"• Gelişmiş trading araçları"}),e.jsx("li",{children:"• Mobil uygulama desteği"})]})]}),e.jsxs("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[y.toFixed(2)," NXT"]}),e.jsx("p",{className:"text-xs text-yellow-400/60",children:"Mevcut Bakiye"})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"Token Değeri:"}),e.jsx("span",{className:"text-yellow-400",children:"$0.10"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-yellow-400/80",children:"USD Değeri:"}),e.jsxs("span",{className:"text-yellow-400",children:["$",(y*.1).toFixed(2)]})]})]})]}),e.jsxs(C,{onClick:()=>window.location.href="/wallet",className:"w-full bg-gradient-to-r from-yellow-500 to-orange-500 hover:from-yellow-400 hover:to-orange-400 text-black font-semibold",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"NXT Satın Al"]})]})]})]})]})}function ke({symbol:c,userId:s}){return e.jsx(ae,{exchange:"OKX",symbol:c,userId:s})}function Se({exchange:c,symbol:s,userId:t}){switch(c){case"BINANCE":return e.jsx(ve,{symbol:s,userId:t});case"OKX":return e.jsx(ke,{symbol:s,userId:t});default:return e.jsx(ae,{exchange:c,symbol:s,userId:t})}}function Ce(){const{exchange:c}=re(),[s]=le();s.get("category");const[t,a]=d.useState(""),[r,l]=d.useState(null),[n,g]=d.useState(1250.75),[b,v]=d.useState("buy"),[u,F]=d.useState(""),[B,y]=d.useState(""),[I,P]=d.useState("limit"),[A,O]=d.useState(!1),[$,h]=d.useState(null),[o]=d.useState("demo-user-id"),i=c?de[c.toUpperCase()]:null;d.useEffect(()=>{i&&i.defaults.length>0&&(a(i.defaults[0]),T(i.defaults[0]))},[i]),d.useEffect(()=>{if(i&&t){const p=Y.createWebSocketConnection(i.name,t,j=>{l(j),I==="market"&&y(j.price.toFixed(2))});if(p)return h(p),()=>{p.close()}}},[i,t]);const T=async p=>{if(i){O(!0);try{const j=await Y.getRealTimePrice(i.name,p);l(j),y(j.price.toFixed(2))}catch(j){console.error("Error loading market data:",j),f.error("Piyasa verisi yüklenemedi")}finally{O(!1)}}};return i?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black",children:[e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-cyan-900/20 via-transparent to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-grid-white/[0.02] bg-[size:50px_50px]"}),e.jsx("div",{className:"relative z-10 p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-gradient-to-br from-cyan-500/30 to-blue-600/30 shadow-lg shadow-cyan-500/30",children:e.jsx(V,{className:"h-6 w-6 text-cyan-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-cyan-400",children:i.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(me,{variant:"secondary",className:"bg-cyan-500/10 text-cyan-400 border-cyan-500/20",children:i.type}),e.jsx("span",{className:"text-cyan-400/60 text-sm",children:"•"}),e.jsx("span",{className:"text-cyan-400/60 text-sm",children:i.region})]})]})]}),e.jsx(w,{className:"bg-black/40 border-yellow-500/20 backdrop-blur-xl",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xe,{className:"h-8 w-8 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-yellow-400/60 uppercase",children:"NXT Balance"}),e.jsxs("p",{className:"text-xl font-bold text-yellow-400",children:[n.toFixed(2)," NXT"]})]})]})})})]}),e.jsx(w,{className:"bg-black/40 border-cyan-500/20 backdrop-blur-xl",children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-cyan-400/80 mb-2 block",children:"Trading Pair"}),e.jsxs(q,{value:t,onValueChange:p=>{a(p),T(p)},children:[e.jsx(L,{className:"w-[200px] bg-black/40 border-cyan-500/20 text-cyan-400",children:e.jsx(M,{})}),e.jsx(G,{className:"bg-black/90 border-cyan-500/20",children:i.defaults.map(p=>e.jsx(E,{value:p,className:"text-cyan-400 focus:bg-cyan-500/10",children:p},p))})]})]}),r&&e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cyan-400/60 uppercase",children:"Price"}),e.jsxs("p",{className:"text-xl font-bold text-cyan-400",children:["$",r.price.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cyan-400/60 uppercase",children:"24h Change"}),e.jsxs("p",{className:`text-lg font-semibold flex items-center gap-1 ${r.change24h>=0?"text-green-400":"text-red-400"}`,children:[r.change24h>=0?e.jsx(R,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"}),r.change24h.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-cyan-400/60 uppercase",children:"24h Volume"}),e.jsx("p",{className:"text-lg font-semibold text-cyan-400",children:r.volume24h})]})]})]})})}),e.jsxs(he,{defaultValue:"trading",className:"space-y-6",children:[e.jsxs(pe,{className:"grid w-full grid-cols-2 bg-black/40 border border-cyan-500/20",children:[e.jsxs(J,{value:"trading",className:"data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),i==null?void 0:i.name," Trading"]}),e.jsxs(J,{value:"exchange-tools",className:"data-[state=active]:bg-cyan-500/20 data-[state=active]:text-cyan-400",children:[e.jsx(ee,{className:"h-4 w-4 mr-2"}),i==null?void 0:i.name," Araçları"]})]}),e.jsx(Z,{value:"trading",className:"space-y-6",children:e.jsx(Se,{exchange:i==null?void 0:i.name,symbol:t,userId:o})}),e.jsx(Z,{value:"exchange-tools",className:"space-y-6",children:e.jsx(we,{exchange:i==null?void 0:i.name,symbol:t,userId:o})})]})]})})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-black via-gray-900 to-black flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-400 mb-4",children:"Geçersiz Exchange"}),e.jsx("p",{className:"text-red-400/60",children:"Belirtilen exchange bulunamadı."})]})})}export{Ce as default};
