const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PortfolioTracker.1762519851985.BGFr9cnI.js","assets/vendor-features.1762519851985.Df8WYcht.js","assets/vendor-core.1762519851985.DgXDOTlK.js","assets/trading-core.1762519851985.XGt4PiHS.js","assets/trading-orders-wrapper.1762519851985.B9aVwej4.js","assets/vendor-ui.1762519851985.CkQAoTGS.js","assets/trading-advanced-orders.1762519851985.DB2Q7Rap.js","assets/vendor-web3.1762519851985.DJwPUCFA.js","assets/web3-core.1762519851985.BkWCdszV.js","assets/ParticleBackground.1762519851985.DWoWvNf0.js","assets/chart-features.1762519851985.CEgwi9Jv.js","assets/trading-feeds.1762519851985.Ci4MbZ1H.js","assets/vendor-crypto.1762519851985.CsUkZs9y.js","assets/trading-terminal.1762519851985.D1YYTi-q.js","assets/web3-defi.1762519851985.CI2P3LoB.js","assets/AutoTradingSignals.1762519851985.D471gjr8.js","assets/SocialTrading.1762519851985.CPnqkZ3l.js","assets/MarketScanner.1762519851985.BYvTyrd4.js","assets/MarketSentiment.1762519851985.BtwbgAqx.js","assets/EconomicCalendar.1762519851985.CZkYY1hR.js","assets/TradeJournal.1762519851985.B1OixzJe.js","assets/admin-dashboard.1762519851985.DenNkgL1.js"])))=>i.map(i=>d[i]);
var Oe=Object.defineProperty;var Be=(o,t,s)=>t in o?Oe(o,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[t]=s;var I=(o,t,s)=>Be(o,typeof t!="symbol"?t+"":t,s);import{u as ve,_ as K}from"./vendor-web3.1762519851985.DJwPUCFA.js";import{j as e}from"./vendor-features.1762519851985.Df8WYcht.js";import{r as i,u as je,L as se}from"./vendor-core.1762519851985.DgXDOTlK.js";import{s as k,B as P,u as N,g as W,h as q,i as V,j as H,E as ae,k as F,c as X,e as le,C as Ne,I as L,T as Se,a as ke,b as J,L as re,d as Me,M as Ke,l as Re,m as ce}from"./trading-core.1762519851985.XGt4PiHS.js";import{W as ne}from"./web3-core.1762519851985.BkWCdszV.js";import{T as M,o as he,w as me,a1 as de,a2 as Le,a3 as ze,R as We,A as oe,S as qe,d as z,u as Ce,a4 as Ve,a5 as He,a6 as pe,a7 as Qe,a8 as ge,M as Xe,H as _e,Z,D as Ae,r as Ge,a9 as Ye,N as Ee,a as Je,F as Ze,aa as et,c as tt,ab as rt,m as st,ac as at,ad as nt}from"./trading-orders-wrapper.1762519851985.B9aVwej4.js";import{P as xe}from"./ParticleBackground.1762519851985.DWoWvNf0.js";import{e as ot,I as it,S as ct,f as D,g as lt,M as dt}from"./chart-features.1762519851985.CEgwi9Jv.js";import{a as ut,N as ht}from"./trading-feeds.1762519851985.Ci4MbZ1H.js";import{C as mt}from"./vendor-crypto.1762519851985.CsUkZs9y.js";import{r as G}from"./trading-terminal.1762519851985.D1YYTi-q.js";import{A as pt,R as gt}from"./trading-advanced-orders.1762519851985.DB2Q7Rap.js";import{S as xt,C as ft}from"./web3-defi.1762519851985.CI2P3LoB.js";const Te=i.memo(({onAdminClick:o,isAdmin:t})=>{var x,j;const s=je(),{isConnected:r}=ve(),[a,n]=i.useState(null),[l,c]=i.useState(!1),[p,g]=i.useState(!1);i.useEffect(()=>{const C=()=>{g(window.scrollY>20)};return window.addEventListener("scroll",C),()=>window.removeEventListener("scroll",C)},[]),i.useEffect(()=>{k.auth.getSession().then(({data:{session:u}})=>{n((u==null?void 0:u.user)??null)});const{data:{subscription:C}}=k.auth.onAuthStateChange((u,_)=>{n((_==null?void 0:_.user)??null)});return()=>C.unsubscribe()},[]);const d=async()=>{await k.auth.signOut(),N.success("Oturumunuz sonlandırıldı"),s("/auth")};return e.jsx("nav",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-500 ${p?"bg-card/80 backdrop-blur-2xl border-b border-primary/30 shadow-xl shadow-primary/10":"bg-transparent"}`,children:e.jsxs("div",{className:"mx-auto max-w-[1800px] px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex h-20 items-center justify-between",children:[e.jsxs(se,{to:"/",className:"flex items-center gap-3 group",children:[e.jsxs("div",{className:"relative flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-primary/20 to-primary/10 shadow-2xl shadow-primary/30 ring-2 ring-primary/30 backdrop-blur-xl transition-all duration-300 group-hover:ring-primary/60 group-hover:shadow-primary/50",children:[e.jsx(M,{className:"h-6 w-6 text-primary animate-pulse"}),e.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-primary/0 to-primary/20 opacity-0 transition-opacity duration-300 group-hover:opacity-100"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-primary via-cyan-400 to-primary bg-clip-text text-2xl font-black tracking-tighter text-transparent drop-shadow-[0_0_20px_rgba(56,189,248,0.4)]",children:"OMNI TERMINAL"}),e.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider",children:"Pro Trading Platform"})]})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[r&&e.jsx(ne,{}),a?e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-success animate-breathe"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:(x=a.email)==null?void 0:x.split("@")[0]})]}),t&&o&&e.jsxs(P,{onClick:o,variant:"outline",size:"sm",className:"border-primary/30 bg-gradient-to-r from-primary/10 to-primary/5 hover:from-primary/20 hover:to-primary/10 hover:border-primary/50 transition-all duration-300",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Admin"]}),e.jsxs(P,{onClick:d,variant:"outline",size:"sm",className:"border-destructive/30 bg-gradient-to-r from-destructive/10 to-destructive/5 hover:from-destructive/20 hover:to-destructive/10 hover:border-destructive/50 transition-all duration-300",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Çıkış"]})]}):e.jsx(se,{to:"/auth",children:e.jsxs(P,{size:"sm",className:"bg-gradient-to-r from-primary to-chart-2 hover:from-primary-dark hover:to-chart-2 shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all duration-300",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Giriş Yap"]})})]}),e.jsx("button",{onClick:()=>c(!l),className:"md:hidden p-2 rounded-lg bg-primary/10 border border-primary/30 hover:bg-primary/20 transition-all duration-300",children:l?e.jsx(Le,{className:"h-6 w-6 text-primary"}):e.jsx(ze,{className:"h-6 w-6 text-primary"})})]}),l&&e.jsxs("div",{className:"md:hidden py-4 space-y-3 animate-fade-in",children:[r&&e.jsx("div",{className:"flex justify-center",children:e.jsx(ne,{})}),a?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-success animate-breathe"}),e.jsx("span",{className:"text-sm font-bold text-foreground",children:(j=a.email)==null?void 0:j.split("@")[0]})]}),t&&o&&e.jsxs(P,{onClick:()=>{o(),c(!1)},variant:"outline",className:"w-full border-primary/30 bg-gradient-to-r from-primary/10 to-primary/5",children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"Admin Panel"]}),e.jsxs(P,{onClick:()=>{d(),c(!1)},variant:"outline",className:"w-full border-destructive/30 bg-gradient-to-r from-destructive/10 to-destructive/5",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Çıkış Yap"]})]}):e.jsx(se,{to:"/auth",onClick:()=>c(!1),children:e.jsxs(P,{className:"w-full bg-gradient-to-r from-primary to-chart-2 shadow-lg shadow-primary/30",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Giriş Yap"]})})]})]})})});Te.displayName="Navbar";function yt({exchange:o,symbol:t,source:s,symbols:r,onExchangeChange:a,onSymbolChange:n,onSourceChange:l,onRefresh:c}){const{isConnected:p}=ve(),[g,d]=i.useState(null);return i.useEffect(()=>{k.auth.getSession().then(({data:{session:j}})=>{d((j==null?void 0:j.user)??null)});const{data:{subscription:x}}=k.auth.onAuthStateChange((j,C)=>{d((C==null?void 0:C.user)??null)});return()=>x.unsubscribe()},[]),e.jsxs("header",{className:"group relative flex flex-wrap items-center justify-between gap-5 overflow-hidden rounded-2xl border-2 border-primary/30 bg-gradient-to-br from-card via-card/80 to-card/60 p-6 shadow-2xl shadow-primary/20 backdrop-blur-2xl transition-all duration-500 hover:border-primary/40 hover:shadow-[0_0_60px_rgba(56,189,248,0.3)]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/8 via-transparent to-accent/8 opacity-0 transition-opacity duration-700 group-hover:opacity-100"}),e.jsx("div",{className:"absolute -top-24 -left-24 w-48 h-48 bg-primary/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-24 -right-24 w-48 h-48 bg-accent/10 rounded-full blur-3xl"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gradient-to-br from-primary/20 to-primary/10 shadow-2xl shadow-primary/30 ring-2 ring-primary/30 backdrop-blur-xl",children:e.jsx("div",{className:"h-6 w-6 rounded-lg bg-gradient-to-br from-primary via-primary to-primary/60 animate-pulse shadow-lg shadow-primary/50"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"bg-gradient-to-r from-primary via-cyan-400 to-primary bg-clip-text text-3xl font-black tracking-tighter text-transparent drop-shadow-[0_0_20px_rgba(56,189,248,0.4)]",children:"OMNI TERMINAL"}),e.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Elite Multi-Exchange Trading Platform"})]})]})}),e.jsxs("div",{className:"relative z-10 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Exchange:"}),e.jsxs(W,{value:o,onValueChange:x=>a(x),children:[e.jsx(q,{className:"w-[140px]",children:e.jsx(V,{})}),e.jsx(H,{children:Object.keys(ae).map(x=>e.jsx(F,{value:x,children:ae[x].name},x))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Symbol:"}),e.jsxs(W,{value:t,onValueChange:n,children:[e.jsx(q,{className:"w-[140px]",children:e.jsx(V,{})}),e.jsx(H,{children:r.map(x=>e.jsx(F,{value:x,children:x.toUpperCase()},x))})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Source:"}),e.jsxs(W,{value:s,onValueChange:x=>l(x),children:[e.jsx(q,{className:"w-[100px]",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(F,{value:"ws",children:"WebSocket"}),e.jsx(F,{value:"rest",children:"REST"})]})]})]}),e.jsx(P,{onClick:c,size:"sm",variant:"outline",children:e.jsx(We,{className:"h-4 w-4"})}),p&&e.jsx(ne,{}),!g&&e.jsx(se,{to:"/auth",children:e.jsxs(P,{size:"sm",className:"bg-gradient-to-r from-primary to-chart-2",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Sign In"]})})]})]})}const bt="wss://stream.binance.com:9443/ws",wt="https://api.binance.com/api/v3",vt=o=>{const[t,s]=i.useState(new Map),[r,a]=i.useState(!0),n=i.useCallback(async()=>{try{a(!0);const c=o.map(async d=>{const x=d.replace("/","").toUpperCase(),j=await fetch(`${wt}/ticker/24hr?symbol=${x}USDT`);if(!j.ok)return{symbol:d,price:Math.random()*7e4+1e4,change24h:(Math.random()-.5)*10,volume:Math.random()*1e9,high24h:Math.random()*75e3+15e3,low24h:Math.random()*65e3+5e3};const C=await j.json();return{symbol:d,price:parseFloat(C.lastPrice),change24h:parseFloat(C.priceChangePercent),volume:parseFloat(C.volume),high24h:parseFloat(C.highPrice),low24h:parseFloat(C.lowPrice)}}),p=await Promise.all(c),g=new Map(p.map(d=>[d.symbol,d]));s(g)}catch(c){console.error("Error fetching initial prices:",c);const p=new Map(o.map(g=>[g,{symbol:g,price:Math.random()*7e4+1e4,change24h:(Math.random()-.5)*10,volume:Math.random()*1e9,high24h:Math.random()*75e3+15e3,low24h:Math.random()*65e3+5e3}]));s(p)}finally{a(!1)}},[o]);i.useEffect(()=>{n();const c=o.map(x=>`${x.replace("/","").toLowerCase()}usdt@ticker`),p=`${bt}/${c.join("/")}`;let g;try{g=new WebSocket(p),g.onmessage=x=>{try{const j=JSON.parse(x.data);(Array.isArray(j)?j:[j]).forEach(u=>{if(u.s){const _=u.s.replace("USDT","").toUpperCase();s(m=>{const f=new Map(m);return f.set(_,{symbol:_,price:parseFloat(u.c),change24h:parseFloat(u.P),volume:parseFloat(u.v),high24h:parseFloat(u.h),low24h:parseFloat(u.l)}),f})}})}catch(j){console.error("WebSocket message error:",j)}},g.onerror=()=>{console.error("WebSocket error, using polling fallback")}}catch(x){console.error("WebSocket connection error:",x)}const d=setInterval(()=>{n()},1e4);return()=>{g&&g.close(),clearInterval(d)}},[o,n]);const l=i.useCallback(c=>t.get(c),[t]);return{prices:t,loading:r,getPrice:l}};function jt({symbols:o,activeSymbol:t,onSymbolClick:s}){const[r,a]=i.useState([]),[n,l]=i.useState(!1),[c,p]=i.useState(new Set),{prices:g,getPrice:d}=vt(o);i.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:{user:u}}=await k.auth.getUser();if(!u)return;const{data:_,error:m}=await k.from("user_watchlist").select("symbol, is_favorite").eq("user_id",u.id);if(m)throw m;const f=new Set((_==null?void 0:_.filter(S=>S.is_favorite).map(S=>S.symbol))||[]);p(f)}catch(u){console.error("Error fetching watchlist:",u)}};i.useEffect(()=>{const u=o.map(_=>{const m=d(_);return{symbol:_,price:(m==null?void 0:m.price)||0,change24h:(m==null?void 0:m.change24h)||0,volume:(m==null?void 0:m.volume)||0,isFavorite:c.has(_)}});a(u)},[o,g,c,d]);const j=async(u,_)=>{_.stopPropagation();try{const{data:{user:m}}=await k.auth.getUser();if(!m){N.error("Please login to add favorites");return}if(c.has(u)){const{error:S}=await k.from("user_watchlist").delete().eq("user_id",m.id).eq("symbol",u);if(S)throw S;p(A=>{const v=new Set(A);return v.delete(u),v}),N.success(`${u} removed from favorites`)}else{const{error:S}=await k.from("user_watchlist").insert({user_id:m.id,symbol:u,is_favorite:!0});if(S)throw S;p(A=>new Set(A).add(u)),N.success(`${u} added to favorites`)}}catch(m){console.error("Error toggling favorite:",m),N.error("Failed to update favorites")}},C=n?r:r.slice(0,6);return e.jsxs("div",{className:"space-y-3 animate-fade-in",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-xl bg-gradient-to-r from-primary/10 via-cyan-500/10 to-primary/10 border border-primary/20 p-3",children:[e.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-primary/20 backdrop-blur-sm",children:e.jsx(oe,{className:"w-4 h-4 text-primary animate-pulse"})}),e.jsx("h3",{className:"text-sm font-bold tracking-wide text-foreground",children:"Elite Watchlist"})]}),e.jsx(P,{variant:"ghost",size:"sm",className:"h-7 gap-1 text-xs hover:bg-primary/20",onClick:()=>l(!n),children:n?"Show Less":`+${r.length-6}`})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:C.map(u=>{const _=u.symbol===t,m=u.change24h>=0;return e.jsxs("div",{onClick:()=>s(u.symbol),className:X("relative overflow-hidden rounded-xl border p-4 transition-all duration-300 cursor-pointer group",_?"bg-gradient-to-r from-primary/20 via-cyan-500/20 to-primary/20 border-primary/50 shadow-xl shadow-primary/30 scale-[1.02]":"border-border/40 bg-card/20 hover:border-primary/40 hover:bg-card/40 hover:scale-[1.01]"),children:[_&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 via-transparent to-white/5 animate-shimmer"}),e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-primary/10 to-transparent rounded-full blur-2xl"}),e.jsxs("div",{className:"relative z-10 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1 rounded bg-primary/10",children:e.jsx("span",{className:"font-mono text-xs font-bold text-foreground",children:u.symbol.toUpperCase()})}),e.jsx(qe,{className:X("w-3.5 h-3.5 cursor-pointer transition-all duration-300",u.isFavorite?"fill-yellow-500 text-yellow-500 scale-110":"text-muted-foreground hover:text-yellow-500 hover:scale-110"),onClick:f=>j(u.symbol,f)})]}),e.jsxs(le,{variant:m?"default":"destructive",className:X("text-[10px] font-bold flex items-center gap-1",m?"bg-success/20 text-success border-success/30":"bg-destructive/20 text-destructive border-destructive/30"),children:[m?e.jsx(M,{className:"w-3 h-3"}):e.jsx(z,{className:"w-3 h-3"}),m?"+":"",u.change24h.toFixed(2),"%"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-baseline gap-2",children:e.jsxs("span",{className:"text-2xl font-bold text-foreground tracking-tight",children:["$",u.price.toFixed(2)]})}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Vol: $",(u.volume/1e6).toFixed(1),"M"]}),u.isFavorite&&e.jsx(le,{variant:"outline",className:"text-[9px] bg-yellow-500/10 text-yellow-500 border-yellow-500/30",children:"Favorite"})]})]}),e.jsx("div",{className:"h-10 opacity-0 group-hover:opacity-100 transition-all duration-300 mt-2",children:e.jsx("div",{className:X("h-full rounded-lg bg-gradient-to-r relative overflow-hidden",m?"from-success/10 via-success/20 to-success/10":"from-destructive/10 via-destructive/20 to-destructive/10"),children:e.jsx("div",{className:"absolute inset-0 flex items-end justify-around p-1",children:[...Array(12)].map((f,S)=>e.jsx("div",{className:X("w-1 rounded-full",m?"bg-success/40":"bg-destructive/40"),style:{height:`${Math.random()*100}%`}},S))})})})]})]},u.symbol)})})]})}const Nt=["1m","5m","15m","1h","4h","1d","1w"],St=({selected:o,onChange:t})=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-4 h-4 text-primary"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Timeframe"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Nt.map(s=>e.jsx(P,{variant:o===s?"default":"outline",size:"sm",onClick:()=>t(s),className:`h-8 transition-all ${o===s?"shadow-lg shadow-primary/20":"hover:border-primary/30"}`,children:s},s))})]}),kt=()=>{const[o,t]=i.useState("single"),s=[{id:"single",icon:He,label:"Single",cols:1},{id:"dual-vertical",icon:pe,label:"Dual V",cols:2},{id:"dual-horizontal",icon:pe,label:"Dual H",cols:1,rotate:!0},{id:"quad",icon:Qe,label:"Quad",cols:2}],r=a=>{var n;t(a),N.success("Layout changed",{description:(n=s.find(l=>l.id===a))==null?void 0:n.label})};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-chart-4"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Chart Layout"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.map(a=>e.jsxs(P,{variant:o===a.id?"default":"outline",size:"sm",onClick:()=>r(a.id),className:`flex-col h-auto py-3 gap-1 transition-all ${o===a.id?"ring-2 ring-primary":""}`,children:[e.jsx(a.icon,{className:`w-4 h-4 ${a.rotate?"rotate-90":""} ${o===a.id?"text-primary-foreground":"text-chart-4"}`}),e.jsx("span",{className:"text-[10px]",children:a.label})]},a.id))}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/20 border border-border",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-3 text-center",children:"Preview"}),o==="single"&&e.jsx("div",{className:"aspect-video rounded border-2 border-dashed border-primary/30 bg-primary/5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Main Chart"})}),o==="dual-vertical"&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"aspect-video rounded border-2 border-dashed border-primary/30 bg-primary/5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Chart 1"})}),e.jsx("div",{className:"aspect-video rounded border-2 border-dashed border-chart-4/30 bg-chart-4/5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Chart 2"})})]}),o==="dual-horizontal"&&e.jsxs("div",{className:"grid grid-rows-2 gap-2",children:[e.jsx("div",{className:"aspect-video rounded border-2 border-dashed border-primary/30 bg-primary/5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Chart 1"})}),e.jsx("div",{className:"aspect-video rounded border-2 border-dashed border-chart-4/30 bg-chart-4/5 flex items-center justify-center",children:e.jsx("span",{className:"text-xs text-muted-foreground",children:"Chart 2"})})]}),o==="quad"&&e.jsx("div",{className:"grid grid-cols-2 grid-rows-2 gap-2",children:[1,2,3,4].map(a=>e.jsx("div",{className:`aspect-video rounded border-2 border-dashed ${a===1?"border-primary/30 bg-primary/5":a===2?"border-chart-4/30 bg-chart-4/5":a===3?"border-chart-2/30 bg-chart-2/5":"border-chart-3/30 bg-chart-3/5"} flex items-center justify-center`,children:e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:["Chart ",a]})},a))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide",children:"Chart Assignments"}),o!=="single"&&e.jsx("div",{className:"space-y-1",children:Array.from({length:o==="quad"?4:2}).map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30 border border-border text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Chart ",n+1]}),e.jsxs("select",{className:"bg-background border border-border rounded px-2 py-1 text-foreground",children:[e.jsx("option",{children:"BTC/USDT"}),e.jsx("option",{children:"ETH/USDT"}),e.jsx("option",{children:"BNB/USDT"})]})]},n))})]})]})},Ct=({patterns:o})=>{if(o.length===0)return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-chart-2"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Patterns"})]}),e.jsx("div",{className:"text-sm text-muted-foreground p-3 rounded-lg bg-muted/20",children:"No patterns detected"})]});const t=r=>r==="bullish"?M:r==="bearish"?z:Xe,s=r=>r==="bullish"?"text-success bg-success/10 border-success/20":r==="bearish"?"text-destructive bg-destructive/10 border-destructive/20":"text-muted-foreground bg-muted/20 border-muted/20";return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"w-4 h-4 text-chart-2"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Patterns"})]}),e.jsx("div",{className:"space-y-2",children:o.slice(0,5).map((r,a)=>{const n=t(r.signal);return e.jsx("div",{className:`p-3 rounded-lg border ${s(r.signal)} transition-all hover:scale-105`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(n,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:r.name}),e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-background/50 uppercase",children:[(r.strength*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1 capitalize",children:[r.signal," signal"]})]})]})},a)})})]})};function _t({candles:o,currentPrice:t,symbol:s}){var u,_;if(o.length===0)return e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(m=>e.jsxs("div",{className:"glass-panel animate-pulse rounded-xl p-4",children:[e.jsx("div",{className:"h-4 w-20 rounded bg-muted/20"}),e.jsx("div",{className:"mt-2 h-6 w-16 rounded bg-muted/20"})]},m))});const r=o.slice(-1440),a=Math.max(...r.map(m=>m.y[1])),n=Math.min(...r.map(m=>m.y[2])),l=((u=r[0])==null?void 0:u.y[0])||t||0,c=t||((_=r[r.length-1])==null?void 0:_.y[3])||0,p=c-l,g=p/l*100,x=r.map(m=>(m.y[1]-m.y[2])*1e3).reduce((m,f)=>m+f,0),j=(a-n)/n*100,C=[{label:"24h Change",value:`${g>=0?"+":""}${g.toFixed(2)}%`,subValue:`${p>=0?"+":""}$${Math.abs(p).toFixed(2)}`,icon:g>=0?M:z,color:g>=0?"text-success":"text-destructive",bgColor:g>=0?"bg-success/10":"bg-destructive/10"},{label:"24h High",value:`$${a.toFixed(2)}`,subValue:`+${((a-c)/c*100).toFixed(2)}%`,icon:M,color:"text-primary",bgColor:"bg-primary/10"},{label:"24h Low",value:`$${n.toFixed(2)}`,subValue:`${((n-c)/c*100).toFixed(2)}%`,icon:z,color:"text-chart-4",bgColor:"bg-chart-4/10"},{label:"24h Volume",value:`${(x/1e6).toFixed(2)}M`,subValue:`${s.toUpperCase()}`,icon:_e,color:"text-chart-2",bgColor:"bg-chart-2/10"},{label:"Volatility",value:`${j.toFixed(2)}%`,subValue:"Price range",icon:Z,color:"text-chart-5",bgColor:"bg-chart-5/10"},{label:"Market Cap",value:"—",subValue:"N/A",icon:Ae,color:"text-muted-foreground",bgColor:"bg-muted/10"}];return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-primary/15 ring-2 ring-primary/35 shadow-lg shadow-primary/20",children:e.jsx(oe,{className:"h-5 w-5 text-primary animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-black text-foreground uppercase tracking-wide",children:"Performance Matrix"}),e.jsx("p",{className:"text-[9px] text-muted-foreground font-mono",children:"Advanced market analytics"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:C.map((m,f)=>{const S=m.icon;return e.jsxs("div",{className:"group relative overflow-hidden rounded-xl border-2 border-border/40 bg-gradient-to-br from-card to-card/70 p-4 backdrop-blur-xl transition-all duration-500 hover:scale-[1.03] hover:border-primary/40 hover:shadow-2xl hover:shadow-primary/10 animate-fade-in-up",style:{animationDelay:`${f*50}ms`},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-primary/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-primary/3 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-[10px] font-black text-muted-foreground uppercase tracking-wider mb-2",children:m.label}),e.jsx("div",{className:`font-mono text-xl font-black ${m.color} drop-shadow-[0_0_8px_rgba(56,189,248,0.3)] mb-1`,children:m.value}),e.jsx("div",{className:"text-[10px] text-muted-foreground font-mono font-bold",children:m.subValue})]}),e.jsx("div",{className:`flex h-11 w-11 items-center justify-center rounded-xl ${m.bgColor} ring-2 ring-${m.color.replace("text-","")}/30 shadow-lg`,children:e.jsx(S,{className:`h-5 w-5 ${m.color}`})})]})]},f)})})]})}const At=({symbol:o,price:t})=>{const s=[{label:"Avg Trade",value:"$1,234.56",icon:_e,change:"+2.5%",positive:!0},{label:"Trades/min",value:"48",icon:Ce,change:"+12%",positive:!0},{label:"Buy Pressure",value:"65%",icon:Ge,change:"+5%",positive:!0},{label:"Activity",value:"High",icon:Z,change:"Trending",positive:!0}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl bg-primary/15 ring-2 ring-primary/35 shadow-lg shadow-primary/20",children:e.jsx(Z,{className:"w-5 h-5 text-primary animate-pulse"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-black text-foreground uppercase tracking-wide",children:"Quick Analytics"}),e.jsx("p",{className:"text-[9px] text-muted-foreground font-mono",children:"Real-time market metrics"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:s.map((r,a)=>e.jsxs("div",{className:"relative overflow-hidden rounded-xl border-2 border-border/40 bg-gradient-to-br from-card to-card/70 p-4 backdrop-blur-xl transition-all duration-300 hover:scale-[1.05] hover:border-primary/40 hover:shadow-xl hover:shadow-primary/10 animate-fade-in",style:{animationDelay:`${a*50}ms`},children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-primary/30 to-transparent"}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-lg bg-primary/15 ring-2 ring-primary/30",children:e.jsx(r.icon,{className:"w-4 h-4 text-primary"})}),e.jsx("span",{className:`px-2 py-0.5 rounded-lg text-[9px] font-black uppercase tracking-wider ${r.positive?"bg-success/20 text-success ring-1 ring-success/40":"bg-destructive/20 text-destructive ring-1 ring-destructive/40"}`,children:r.change})]}),e.jsx("div",{className:"text-[10px] text-muted-foreground font-bold uppercase tracking-wider mb-1.5",children:r.label}),e.jsx("div",{className:"text-lg font-black text-foreground",children:r.value})]},a))})]})},Ie=i.memo(({symbols:o,activeSymbol:t,timeframe:s,indicatorSettings:r,detectedPatterns:a,candles:n,lastPrice:l,logs:c,onSymbolClick:p,onTimeframeChange:g,onApplyIndicators:d})=>e.jsxs("aside",{className:"glass-panel space-y-4 rounded-2xl p-5 shadow-2xl transition-all duration-300 hover:shadow-primary/10 animate-fade-in-up",children:[e.jsx(jt,{symbols:o,activeSymbol:t,onSymbolClick:p}),e.jsx(St,{selected:s,onChange:g}),e.jsx(kt,{}),e.jsx(ot,{}),e.jsx(it,{settings:r,onApply:d}),r.showPatterns&&e.jsx(Ct,{patterns:a}),e.jsx(_t,{candles:n,currentPrice:l,symbol:t}),e.jsx(At,{symbol:t,price:l}),e.jsx(ut,{candles:n,symbol:t})]}));Ie.displayName="LeftSidebar";const Et={BTC:67890,ETH:3456,SOL:145,TRX:.15,AVAX:38.5,ARB:3456},fe=.01,Tt=()=>{const[o,t]=i.useState([]),[s,r]=i.useState(""),[a,n]=i.useState(""),[l,c]=i.useState(""),[p,g]=i.useState(!1),[d,x]=i.useState(0),[j,C]=i.useState(!1);i.useEffect(()=>{u(),_()},[]);const u=async()=>{try{const{data:h,error:b}=await k.from("payment_addresses").select("blockchain, address").eq("active",!0);if(b)throw b;t(h||[]),h&&h.length>0&&r(h[0].blockchain)}catch(h){console.error("Error fetching payment addresses:",h),N.error("Failed to load payment addresses")}},_=async()=>{try{const{data:{user:h}}=await k.auth.getUser();if(!h)return;const{data:b,error:w}=await k.from("omni99_balances").select("balance").eq("user_id",h.id).single();if(w&&w.code!=="PGRST116")throw w;x(parseFloat(String((b==null?void 0:b.balance)||0)))}catch(h){console.error("Error fetching balance:",h)}},m=o.find(h=>h.blockchain===s),f=parseFloat(a)||0,S=f*(Et[s]||0),A=S/fe,v=h=>{navigator.clipboard.writeText(h),g(!0),N.success("Address copied to clipboard"),setTimeout(()=>g(!1),2e3)},y=async()=>{try{if(!a||parseFloat(a)<=0){N.error("Please enter a valid amount");return}C(!0);const{data:{user:h}}=await k.auth.getUser();if(!h){N.error("Please login to continue");return}const{error:b}=await k.from("crypto_payments").insert({user_id:h.id,blockchain:s,tx_hash:l||null,amount_crypto:f,amount_usd:S,omni99_amount:A,status:"pending"});if(b)throw b;N.success("Payment submitted! Waiting for admin verification."),n(""),c("");const w=k.channel(`payment_updates_${h.id}`).on("postgres_changes",{event:"UPDATE",schema:"public",table:"crypto_payments",filter:`user_id=eq.${h.id}`},E=>{E.new.status==="approved"&&(N.success(`${E.new.omni99_amount} OMNI99 tokens added to your account!`),_())}).subscribe();setTimeout(()=>k.removeChannel(w),3e5)}catch(h){console.error("Error submitting payment:",h),N.error("Failed to submit payment")}finally{C(!1)}};return e.jsxs(Ne,{className:"p-6 space-y-6 bg-gradient-to-br from-primary/5 via-background to-chart-1/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-bold text-foreground",children:"Buy OMNI99 Tokens"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Your Balance"}),e.jsxs("div",{className:"text-lg font-bold text-primary",children:[d.toFixed(2)," OMNI99"]})]})]}),e.jsx("div",{className:"p-4 rounded-lg bg-primary/10 border border-primary/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ee,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),e.jsx("div",{className:"text-xs text-foreground",children:"Send crypto to the address below, then submit this form with your transaction hash. Admin will verify and credit your OMNI99 tokens."})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Select Blockchain"}),e.jsxs(W,{value:s,onValueChange:r,children:[e.jsx(q,{children:e.jsx(V,{placeholder:"Choose blockchain"})}),e.jsx(H,{children:o.map(h=>e.jsx(F,{value:h.blockchain,children:h.blockchain},h.blockchain))})]})]}),m&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Payment Address"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{value:m.address,readOnly:!0,className:"font-mono text-xs"}),e.jsx(P,{variant:"outline",size:"sm",onClick:()=>v(m.address),children:p?e.jsx(Je,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-foreground",children:["Amount (",s,")"]}),e.jsx(L,{type:"number",step:"0.00000001",placeholder:"0.0",value:a,onChange:h=>n(h.target.value),className:"text-right font-semibold text-lg"}),f>0&&e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"USD Value:"}),e.jsxs("span",{className:"font-semibold",children:["$",S.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-primary",children:[e.jsx("span",{children:"You will receive:"}),e.jsxs("span",{className:"font-bold",children:[A.toFixed(2)," OMNI99"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-foreground",children:"Transaction Hash (Optional)"}),e.jsx(L,{type:"text",placeholder:"Enter transaction hash after sending",value:l,onChange:h=>c(h.target.value),className:"font-mono text-xs"})]}),e.jsx(P,{onClick:y,disabled:j||!a||parseFloat(a)<=0,className:"w-full",size:"lg",children:j?"Submitting...":"Submit Payment"}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground",children:["Rate: 1 OMNI99 = $",fe," USD"]})]})},$={binance:{apiKey:"your_binance_api_key",secretKey:"your_binance_secret_key"},alphaVantage:{apiKey:"your_alpha_vantage_key"},polygon:{apiKey:"your_polygon_api_key"},finnhub:{apiKey:"your_finnhub_api_key"},oanda:{apiKey:"your_oanda_api_key",accountId:"your_oanda_account_id",environment:"practice"},coldWallets:{btc:"your_btc_cold_wallet_address",eth:"your_eth_cold_wallet_address",bsc:"your_bsc_cold_wallet_address",polygon:"your_polygon_cold_wallet_address",solana:"your_solana_cold_wallet_address",tron:"your_tron_cold_wallet_address"},trading:{enableRealTrading:!1}};class It{constructor(){I(this,"userId",null);I(this,"coldWallets",new Map);this.getDefaultWallets().forEach(t=>{this.coldWallets.set(t.id,t)})}getDefaultWallets(){const t=[];return t.push({id:"cw_btc_1",address:$.coldWallets.btc,chain:"bitcoin",currency:"BTC",minAmount:1e-5,enabled:!0,label:"Primary BTC Cold Wallet"}),t.push({id:"cw_eth_1",address:$.coldWallets.eth,chain:"ethereum",currency:"ETH",minAmount:1e-4,enabled:!0,label:"Primary ETH Cold Wallet"}),t.push({id:"cw_bsc_1",address:$.coldWallets.bsc,chain:"binance-smart-chain",currency:"BNB",minAmount:.001,enabled:!0,label:"Primary BSC Cold Wallet"}),t.push({id:"cw_polygon_1",address:$.coldWallets.polygon,chain:"polygon",currency:"MATIC",minAmount:.01,enabled:!0,label:"Primary Polygon Cold Wallet"}),t.push({id:"cw_solana_1",address:$.coldWallets.solana,chain:"solana",currency:"SOL",minAmount:.001,enabled:!0,label:"Primary Solana Cold Wallet"}),t.push({id:"cw_tron_1",address:$.coldWallets.tron,chain:"tron",currency:"TRX",minAmount:1,enabled:!0,label:"Primary Tron Cold Wallet"}),t}async initialize(t){this.userId=t,await this.loadUserWallets()}async loadUserWallets(){if(this.userId)try{const{data:t,error:s}=await k.from("cold_wallets").select("*").eq("user_id",this.userId).eq("enabled",!0);if(s)throw s;t&&t.length>0&&t.forEach(r=>{this.coldWallets.set(r.id,{id:r.id,address:r.address,chain:r.chain,currency:r.currency,minAmount:r.min_amount,enabled:r.enabled,label:r.label})})}catch(t){console.error("Failed to load user wallets:",t)}}getColdWallets(){return Array.from(this.coldWallets.values()).filter(t=>t.enabled)}getWalletByChain(t){return Array.from(this.coldWallets.values()).find(s=>s.chain===t&&s.enabled)}async addCustomWallet(t){if(!this.userId)throw new Error("User not initialized");const s=`cw_custom_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,{error:r}=await k.from("cold_wallets").insert({id:s,user_id:this.userId,address:t.address,chain:t.chain,currency:t.currency,min_amount:t.minAmount,enabled:t.enabled,label:t.label,created_at:new Date().toISOString()});if(r)throw r;this.coldWallets.set(s,{id:s,...t})}async processMicroPayment(t,s,r,a){if(!this.userId)throw new Error("User not initialized");const n=this.getWalletByChain(a);if(!n)throw new Error(`No cold wallet configured for chain: ${a}`);if(s<n.minAmount)throw new Error(`Amount below minimum threshold: ${n.minAmount} ${r}`);const c=s*.001,g=s*5e-4,d={id:`mp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,userId:this.userId,orderId:t,walletAddress:n.address,amount:s,currency:r,chain:a,status:"pending",timestamp:new Date,feeAmount:c,exchangeFee:g};try{const{error:x}=await k.from("micro_payments").insert({id:d.id,user_id:d.userId,order_id:d.orderId,wallet_address:d.walletAddress,amount:d.amount,currency:d.currency,chain:d.chain,status:d.status,created_at:d.timestamp.toISOString(),fee_amount:d.feeAmount,exchange_fee:d.exchangeFee});if(x)throw x;return this.queuePaymentProcessing(d.id),d}catch(x){throw console.error("Failed to process micro payment:",x),x}}async queuePaymentProcessing(t){setTimeout(async()=>{try{await k.from("micro_payments").update({status:"processing"}).eq("id",t),setTimeout(async()=>{const r="",a="";let n=null;n||(n=`0x${Math.random().toString(16).slice(2,66)}`),await k.from("micro_payments").update({status:"completed",tx_hash:n,completed_at:new Date().toISOString()}).eq("id",t)},3e3)}catch(s){console.error("Payment processing failed:",s),await k.from("micro_payments").update({status:"failed"}).eq("id",t)}},1e3)}async getPaymentHistory(t=50){if(!this.userId)throw new Error("User not initialized");const{data:s,error:r}=await k.from("micro_payments").select("*").eq("user_id",this.userId).order("created_at",{ascending:!1}).limit(t);if(r)throw r;return(s||[]).map(a=>({id:a.id,userId:a.user_id,orderId:a.order_id,walletAddress:a.wallet_address,amount:a.amount,currency:a.currency,chain:a.chain,txHash:a.tx_hash,status:a.status,timestamp:new Date(a.created_at),feeAmount:a.fee_amount,exchangeFee:a.exchange_fee}))}async getTotalPayments(){if(!this.userId)throw new Error("User not initialized");const{data:t,error:s}=await k.from("micro_payments").select("status, amount").eq("user_id",this.userId);if(s)throw s;return(t||[]).reduce((a,n)=>(a.total+=n.amount,n.status==="completed"&&(a.completed+=n.amount),(n.status==="pending"||n.status==="processing")&&(a.pending+=n.amount),a),{total:0,completed:0,pending:0})}async automatePaymentOnTrade(t,s,r,a){const l=s*2e-4;let c="ethereum";r.includes("BNB")?c="binance-smart-chain":r.includes("MATIC")?c="polygon":r.includes("BTC")&&(c="bitcoin");try{await this.processMicroPayment(t,l,r,c)}catch(p){console.error("Automated payment failed:",p)}}}new It;class Pt{constructor(){I(this,"baseUrl");I(this,"wsBaseUrl","wss://stream.binance.com:9443/ws");I(this,"apiKey");I(this,"secretKey");I(this,"rateLimits",{weight:1200,orders:10,rawRequests:6100});I(this,"defaultPairs",["BTCUSDT","ETHUSDT","BNBUSDT","SOLUSDT","ADAUSDT","XRPUSDT","DOGEUSDT","DOTUSDT","MATICUSDT","AVAXUSDT"]);this.apiKey=$.binance.apiKey,this.secretKey=$.binance.secretKey,this.baseUrl="https://api.binance.com/api/v3"}getKlinesUrl(t,s,r=500){return`${this.baseUrl}/klines?symbol=${t.toUpperCase()}&interval=${s}&limit=${r}`}getDepthUrl(t,s=100){return`${this.baseUrl}/depth?symbol=${t.toUpperCase()}&limit=${s}`}getTickerUrl(t){return`${this.baseUrl}/ticker/price?symbol=${t.toUpperCase()}`}get24hrTickerUrl(t){return`${this.baseUrl}/ticker/24hr?symbol=${t.toUpperCase()}`}getTradeWebSocketUrl(t){return`${this.wsBaseUrl}/${t.toLowerCase()}@trade`}getDepthWebSocketUrl(t){return`${this.wsBaseUrl}/${t.toLowerCase()}@depth`}getKlineWebSocketUrl(t,s){return`${this.wsBaseUrl}/${t.toLowerCase()}@kline_${s}`}formatKlinesToCandles(t){return t.map(s=>({x:s[0],y:[parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]),parseFloat(s[4])]}))}formatDepthResponse(t){return{bids:t.bids.map(([s,r])=>({price:parseFloat(s),volume:parseFloat(r)})),asks:t.asks.map(([s,r])=>({price:parseFloat(s),volume:parseFloat(r)}))}}formatTradeMessage(t){return{price:parseFloat(t.p),volume:parseFloat(t.q),timestamp:t.T,side:t.m?"sell":"buy"}}convertTimeframe(t){return{"1m":"1m","5m":"5m","15m":"15m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"}[t]||"1m"}formatSymbol(t,s){return`${t.toUpperCase()}${s.toUpperCase()}`}parseSymbol(t){const s=["USDT","USDC","BUSD","BTC","ETH","BNB"];for(const r of s)if(t.endsWith(r))return{base:t.slice(0,-r.length),quote:r};return{base:t.slice(0,-4),quote:t.slice(-4)}}validateSymbol(t){return/^[A-Z]{3,10}$/.test(t.toUpperCase())}createSignature(t){return mt.HmacSHA256(t,this.secretKey).toString()}createAuthHeaders(){return{"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/json"}}createSignedParams(t){const s=Date.now(),r=new URLSearchParams({...t,timestamp:s.toString()}).toString(),a=this.createSignature(r);return`${r}&signature=${a}`}async getAccountInfo(){if(!this.apiKey||!this.secretKey)throw new Error("Binance API credentials not configured");const t=this.createSignedParams({}),s=`${this.baseUrl}/account?${t}`,r=await fetch(s,{method:"GET",headers:this.createAuthHeaders()});if(!r.ok){const a=await r.json();throw new Error(`Binance API Error: ${a.msg||"Unknown error"}`)}return r.json()}async getBalance(t){const r=(await this.getAccountInfo()).balances.find(a=>a.asset===t.toUpperCase());return{free:parseFloat((r==null?void 0:r.free)||"0"),locked:parseFloat((r==null?void 0:r.locked)||"0")}}async placeBuyOrder(t,s,r,a="MARKET"){throw!this.apiKey||!this.secretKey?new Error("Binance API credentials not configured"):new Error("Real trading is disabled. Enable in configuration.")}async placeSellOrder(t,s,r,a="MARKET"){throw!this.apiKey||!this.secretKey?new Error("Binance API credentials not configured"):new Error("Real trading is disabled. Enable in configuration.")}async cancelOrder(t,s){if(!this.apiKey||!this.secretKey)throw new Error("Binance API credentials not configured");const r=this.createSignedParams({symbol:t.toUpperCase(),orderId:s.toString()}),a=`${this.baseUrl}/order`,n=await fetch(a,{method:"DELETE",headers:this.createAuthHeaders(),body:r});if(!n.ok){const l=await n.json();throw new Error(`Binance Cancel Error: ${l.msg||"Unknown error"}`)}return n.json()}async getOpenOrders(t){if(!this.apiKey||!this.secretKey)throw new Error("Binance API credentials not configured");const s={};t&&(s.symbol=t.toUpperCase());const r=this.createSignedParams(s),a=`${this.baseUrl}/openOrders?${r}`,n=await fetch(a,{method:"GET",headers:this.createAuthHeaders()});if(!n.ok){const l=await n.json();throw new Error(`Binance API Error: ${l.msg||"Unknown error"}`)}return n.json()}async fetchKlines(t,s,r=500){try{const a=this.getKlinesUrl(t,s,r),n=await fetch(a);if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);const l=await n.json();return this.formatKlinesToCandles(l)}catch(a){throw console.error("Binance fetchKlines error:",a),a}}async fetchOrderBook(t,s=100){try{const r=this.getDepthUrl(t,s),a=await fetch(r);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);const n=await a.json();return this.formatDepthResponse(n)}catch(r){throw console.error("Binance fetchOrderBook error:",r),r}}async fetchTicker(t){try{const[s,r]=await Promise.all([fetch(this.getTickerUrl(t)),fetch(this.get24hrTickerUrl(t))]);if(!s.ok||!r.ok)throw new Error("Failed to fetch ticker data");const a=await s.json(),n=await r.json();return{price:parseFloat(a.price),change24h:parseFloat(n.priceChangePercent)}}catch(s){throw console.error("Binance fetchTicker error:",s),s}}createAuthenticatedWebSocket(){return!this.apiKey||!this.secretKey?(console.warn("Binance API credentials not configured for WebSocket"),null):new WebSocket(this.wsBaseUrl)}isConfigured(){return!!(this.apiKey&&this.secretKey)}getConfiguration(){return{hasCredentials:this.isConfigured(),testnet:!1,tradingEnabled:$.trading.enableRealTrading}}handleError(t){var s,r;return(r=(s=t.response)==null?void 0:s.data)!=null&&r.msg?`Binance Error: ${t.response.data.msg}`:t.message?`Binance Error: ${t.message}`:"Binance: Unknown error occurred"}}const O=new Pt;class $t{constructor(){I(this,"baseUrl","https://www.alphavantage.co/query");I(this,"apiKey");this.apiKey=$.alphaVantage.apiKey}async getQuote(t){if(!this.apiKey)throw new Error("Alpha Vantage API key not configured");const s=`${this.baseUrl}?function=GLOBAL_QUOTE&symbol=${t}&apikey=${this.apiKey}`,r=await fetch(s);if(!r.ok)throw new Error(`Alpha Vantage API error: ${r.statusText}`);const n=(await r.json())["Global Quote"];if(!n)throw new Error("Invalid symbol or API limit reached");return{symbol:n["01. symbol"],price:parseFloat(n["05. price"]),change:parseFloat(n["09. change"]),changePercent:parseFloat(n["10. change percent"].replace("%","")),volume:parseInt(n["06. volume"])}}async getIntradayData(t,s="5min"){if(!this.apiKey)throw new Error("Alpha Vantage API key not configured");const r=`${this.baseUrl}?function=TIME_SERIES_INTRADAY&symbol=${t}&interval=${s}&apikey=${this.apiKey}`,a=await fetch(r);if(!a.ok)throw new Error(`Alpha Vantage API error: ${a.statusText}`);const l=(await a.json())[`Time Series (${s})`];if(!l)throw new Error("No data available or API limit reached");return Object.entries(l).map(([c,p])=>({x:new Date(c).getTime(),y:[parseFloat(p["1. open"]),parseFloat(p["2. high"]),parseFloat(p["3. low"]),parseFloat(p["4. close"])]})).reverse()}async getDailyData(t){if(!this.apiKey)throw new Error("Alpha Vantage API key not configured");const s=`${this.baseUrl}?function=TIME_SERIES_DAILY&symbol=${t}&apikey=${this.apiKey}`,r=await fetch(s);if(!r.ok)throw new Error(`Alpha Vantage API error: ${r.statusText}`);const n=(await r.json())["Time Series (Daily)"];if(!n)throw new Error("No data available or API limit reached");return Object.entries(n).slice(0,100).map(([l,c])=>({x:new Date(l).getTime(),y:[parseFloat(c["1. open"]),parseFloat(c["2. high"]),parseFloat(c["3. low"]),parseFloat(c["4. close"])]})).reverse()}}class Ft{constructor(){I(this,"baseUrl","https://api.polygon.io");I(this,"apiKey");this.apiKey=$.polygon.apiKey}async getQuote(t){var l,c,p;if(!this.apiKey)throw new Error("Polygon API key not configured");const s=`${this.baseUrl}/v2/snapshot/locale/us/markets/stocks/tickers/${t}?apikey=${this.apiKey}`,r=await fetch(s);if(!r.ok)throw new Error(`Polygon API error: ${r.statusText}`);const n=(await r.json()).results;if(!n)throw new Error("Invalid symbol or no data available");return{symbol:n.ticker,price:((l=n.lastQuote)==null?void 0:l.price)||((c=n.prevDay)==null?void 0:c.c)||0,change:n.todaysChange||0,changePercent:n.todaysChangePerc||0,volume:((p=n.day)==null?void 0:p.v)||0}}async getAggregates(t,s=1,r="minute",a,n){if(!this.apiKey)throw new Error("Polygon API key not configured");const l=`${this.baseUrl}/v2/aggs/ticker/${t}/range/${s}/${r}/${a}/${n}?adjusted=true&sort=asc&limit=5000&apikey=${this.apiKey}`,c=await fetch(l);if(!c.ok)throw new Error(`Polygon API error: ${c.statusText}`);const p=await c.json();if(!p.results)throw new Error("No data available");return p.results.map(g=>({x:g.t,y:[g.o,g.h,g.l,g.c]}))}}class Ut{constructor(){I(this,"baseUrl","https://finnhub.io/api/v1");I(this,"apiKey");this.apiKey=$.finnhub.apiKey}async getQuote(t){if(!this.apiKey)throw new Error("Finnhub API key not configured");const s=`${this.baseUrl}/quote?symbol=${t}&token=${this.apiKey}`,r=await fetch(s);if(!r.ok)throw new Error(`Finnhub API error: ${r.statusText}`);const a=await r.json();if(a.error)throw new Error(`Finnhub error: ${a.error}`);return{symbol:t,price:a.c||0,change:a.d||0,changePercent:a.dp||0,volume:0}}async getCandles(t,s="5",r,a){if(!this.apiKey)throw new Error("Finnhub API key not configured");const n=`${this.baseUrl}/stock/candle?symbol=${t}&resolution=${s}&from=${r}&to=${a}&token=${this.apiKey}`,l=await fetch(n);if(!l.ok)throw new Error(`Finnhub API error: ${l.statusText}`);const c=await l.json();if(c.s!=="ok")throw new Error("No data available");return c.t.map((p,g)=>({x:p*1e3,y:[c.o[g],c.h[g],c.l[g],c.c[g]]}))}async getCompanyProfile(t){if(!this.apiKey)throw new Error("Finnhub API key not configured");const s=`${this.baseUrl}/stock/profile2?symbol=${t}&token=${this.apiKey}`,r=await fetch(s);if(!r.ok)throw new Error(`Finnhub API error: ${r.statusText}`);return r.json()}}class Dt{constructor(){I(this,"alphaVantage");I(this,"polygon");I(this,"finnhub");this.alphaVantage=new $t,this.polygon=new Ft,this.finnhub=new Ut}async getQuote(t,s="finnhub"){switch(s){case"alphavantage":return this.alphaVantage.getQuote(t);case"polygon":return this.polygon.getQuote(t);case"finnhub":return this.finnhub.getQuote(t);default:throw new Error("Invalid provider")}}async getCandles(t,s="5m",r="finnhub"){const a=Date.now(),n=a-24*60*60*1e3;switch(r){case"alphavantage":if(s.includes("m")){const x=s.replace("m","min");return this.alphaVantage.getIntradayData(t,x)}else return this.alphaVantage.getDailyData(t);case"polygon":const l=parseInt(s.replace(/[a-zA-Z]/g,"")),c=s.includes("m")?"minute":s.includes("h")?"hour":"day",p=new Date(n).toISOString().split("T")[0],g=new Date(a).toISOString().split("T")[0];return this.polygon.getAggregates(t,l,c,p,g);case"finnhub":let d="5";return s==="1m"?d="1":s==="5m"?d="5":s==="15m"?d="15":s==="30m"?d="30":s==="1h"?d="60":s==="1d"&&(d="D"),this.finnhub.getCandles(t,d,Math.floor(n/1e3),Math.floor(a/1e3));default:throw new Error("Invalid provider")}}getAvailableProviders(){const t=[];return t.push("alphavantage"),t.push("polygon"),t.push("finnhub"),t}isConfigured(){return this.getAvailableProviders().length>0}}const Q=new Dt;class Ot{constructor(){I(this,"baseUrl");I(this,"apiKey");I(this,"accountId");this.apiKey=$.oanda.apiKey,this.accountId=$.oanda.accountId,this.baseUrl="https://api-fxpractice.oanda.com"}getHeaders(){return{Authorization:`Bearer ${this.apiKey}`,"Content-Type":"application/json"}}async getQuote(t){if(!this.apiKey)throw new Error("OANDA API key not configured");const s=`${this.baseUrl}/v3/accounts/${this.accountId}/pricing?instruments=${t}`,r=await fetch(s,{headers:this.getHeaders()});if(!r.ok)throw new Error(`OANDA API error: ${r.statusText}`);const n=(await r.json()).prices[0];if(!n)throw new Error("No pricing data available");return{instrument:n.instrument,bid:parseFloat(n.bids[0].price),ask:parseFloat(n.asks[0].price),spread:parseFloat(n.asks[0].price)-parseFloat(n.bids[0].price),timestamp:new Date(n.time).getTime()}}async getCandles(t,s="M5",r=500){if(!this.apiKey)throw new Error("OANDA API key not configured");const a=`${this.baseUrl}/v3/instruments/${t}/candles?granularity=${s}&count=${r}`,n=await fetch(a,{headers:this.getHeaders()});if(!n.ok)throw new Error(`OANDA API error: ${n.statusText}`);return(await n.json()).candles.map(c=>({x:new Date(c.time).getTime(),y:[parseFloat(c.mid.o),parseFloat(c.mid.h),parseFloat(c.mid.l),parseFloat(c.mid.c)]}))}async getAccountInfo(){if(!this.apiKey||!this.accountId)throw new Error("OANDA credentials not configured");const t=`${this.baseUrl}/v3/accounts/${this.accountId}`,s=await fetch(t,{headers:this.getHeaders()});if(!s.ok)throw new Error(`OANDA API error: ${s.statusText}`);return s.json()}async placeOrder(t,s,r="MARKET",a){throw!this.apiKey||!this.accountId?new Error("OANDA credentials not configured"):new Error("Real trading is disabled. Enable in configuration.")}async getPositions(){if(!this.apiKey||!this.accountId)throw new Error("OANDA credentials not configured");const t=`${this.baseUrl}/v3/accounts/${this.accountId}/positions`,s=await fetch(t,{headers:this.getHeaders()});if(!s.ok)throw new Error(`OANDA API error: ${s.statusText}`);return s.json()}}class Bt{constructor(){I(this,"oanda");this.oanda=new Ot}async getQuote(t){return this.oanda.getQuote(t)}async getCandles(t,s="5m"){let r="M5";switch(s){case"1m":r="M1";break;case"5m":r="M5";break;case"15m":r="M15";break;case"30m":r="M30";break;case"1h":r="H1";break;case"4h":r="H4";break;case"1d":r="D";break}return this.oanda.getCandles(t,r)}async getAccountInfo(){return this.oanda.getAccountInfo()}async placeBuyOrder(t,s,r){return this.oanda.placeOrder(t,Math.abs(s),r?"LIMIT":"MARKET",r)}async placeSellOrder(t,s,r){return this.oanda.placeOrder(t,-Math.abs(s),r?"LIMIT":"MARKET",r)}async getPositions(){return this.oanda.getPositions()}isConfigured(){return!!$.oanda.accountId}getConfiguration(){return{hasCredentials:this.isConfigured(),environment:$.oanda.environment,tradingEnabled:$.trading.enableRealTrading}}}const B=new Bt;class Mt{constructor(){I(this,"userId",null);I(this,"tradingEnabled",!0)}async initialize(t){this.userId=t,this.tradingEnabled=!0}async saveCredentials(t,s,r,a=!1){if(!this.userId)throw new Error("User not initialized");const{error:n}=await k.from("exchange_credentials").upsert({user_id:this.userId,exchange:t,api_key:s,api_secret:r,testnet,updated_at:new Date().toISOString()},{onConflict:"user_id,exchange"});if(n)throw n}async getCredentials(t){if(!this.userId)throw new Error("User not initialized");const{data:s,error:r}=await k.from("exchange_credentials").select("*").eq("user_id",this.userId).eq("exchange",t).maybeSingle();if(r)throw r;return s}async executeCryptoOrder(t,s,r,a,n,l){throw this.userId?new Error("Real trading is disabled. Enable in configuration."):new Error("User not initialized")}async executeForexOrder(t,s,r,a){throw this.userId?new Error("Real trading is disabled. Enable in configuration."):new Error("User not initialized")}async executeOrder(t,s,r,a,n,l){return t.toLowerCase()==="oanda"||s.includes("_")?this.executeForexOrder(s,r,n,l):this.executeCryptoOrder(t,s,r,a,n,l)}async getOrders(t){if(!this.userId)throw new Error("User not initialized");let s=k.from("orders").select("*").eq("user_id",this.userId);t!=null&&t.exchange&&(s=s.eq("exchange",t.exchange)),t!=null&&t.symbol&&(s=s.eq("symbol",t.symbol)),t!=null&&t.status&&(s=s.eq("status",t.status));const{data:r,error:a}=await s.order("created_at",{ascending:!1});if(a)throw a;return(r||[]).map(n=>({id:n.id,userId:n.user_id,exchange:n.exchange,symbol:n.symbol,side:n.side,type:n.type,price:n.price,amount:n.amount,filled:n.filled,status:n.status,timestamp:new Date(n.created_at),externalOrderId:n.external_order_id}))}async cancelOrder(t){if(!this.userId)throw new Error("User not initialized");const{error:s}=await k.from("orders").update({status:"cancelled"}).eq("id",t).eq("user_id",this.userId);return!s}async getRealBalance(t){if(!this.userId)throw new Error("User not initialized");try{switch(t.toLowerCase()){case"binance":if(!O.isConfigured())throw new Error("Binance API credentials not configured");const s=await O.getAccountInfo(),r={};return s.balances.forEach(n=>{const l=parseFloat(n.free),c=parseFloat(n.locked);(l>0||c>0)&&(r[n.asset]={free:l,locked:c})}),r;case"oanda":if(!B.isConfigured())throw new Error("OANDA credentials not configured");const a=await B.getAccountInfo();return{USD:{free:parseFloat(a.account.balance),locked:parseFloat(a.account.marginUsed||"0")}};default:throw new Error(`Exchange ${t} not supported for real balance fetching`)}}catch(s){throw console.error(`Failed to fetch real balance from ${t}:`,s),s}}async getBalance(t){if(!this.userId)throw new Error("User not initialized");try{const s=await this.getRealBalance(t),r={};return Object.entries(s).forEach(([a,n])=>{r[a]=n.free+n.locked}),r}catch{const{data:r,error:a}=await k.from("balances").select("*").eq("user_id",this.userId).eq("exchange",t);if(a)throw a;const n={};return(r||[]).forEach(l=>{n[l.asset]=l.amount}),n}}async syncBalances(t){if(!this.userId)throw new Error("User not initialized");try{const s=await this.getRealBalance(t);for(const[r,a]of Object.entries(s)){const n=a.free+a.locked;await k.from("balances").upsert({user_id:this.userId,exchange:t,asset:r,amount:n,free:a.free,locked:a.locked,updated_at:new Date().toISOString()},{onConflict:"user_id,exchange,asset"})}}catch(s){throw console.error(`Failed to sync balances for ${t}:`,s),s}}async getAccountSummary(){if(!this.userId)throw new Error("User not initialized");const t=[];let s=0;O.isConfigured()&&t.push("Binance"),B.isConfigured()&&t.push("OANDA"),Q.isConfigured()&&t.push("Stocks");const{data:r}=await k.from("orders").select("id").eq("user_id",this.userId).in("status",["pending","partial"]),a=(r==null?void 0:r.length)||0;return{exchanges:t,totalValue:s,activeOrders:a,tradingEnabled:$.trading.enableRealTrading}}async getAvailableAssets(t){switch(t){case"crypto":return O.defaultPairs;case"forex":return[...B.constructor.prototype.MAJOR_FOREX_PAIRS||[]];case"stocks":return Q.constructor.prototype.POPULAR_STOCKS||[];default:return[]}}isRealTradingEnabled(){return $.trading.enableRealTrading}getConfiguredExchanges(){return[{exchange:"Binance",assetType:"crypto",configured:O.isConfigured()},{exchange:"OANDA",assetType:"forex",configured:B.isConfigured()},{exchange:"Stocks",assetType:"stocks",configured:Q.isConfigured()}]}}const Y=new Mt,Kt=()=>{const[o,t]=i.useState([]),[s,r]=i.useState([]),[a,n]=i.useState([]),[l,c]=i.useState({}),[p,g]=i.useState(!1),[d,x]=i.useState(!1);i.useEffect(()=>{(async()=>{const{data:{session:y}}=await k.auth.getSession();y!=null&&y.user&&(await Y.initialize(y.user.id),x(!0),await f(),await u())})()},[]);const j=i.useCallback(async(v,y,h,b=!0)=>{try{await Y.saveCredentials(v,y,h,b),G.createExchange(v,y,h,b),N.success(`Connected to ${v}`),await u()}catch(w){console.error("Failed to connect exchange:",w),N.error(`Failed to connect to ${v}: ${w.message}`)}},[]),C=i.useCallback(v=>{G.disconnectExchange(v),N.success(`Disconnected from ${v}`)},[]),u=i.useCallback(async()=>{if(d)try{const{data:v}=await k.from("exchange_credentials").select("exchange");if(!v)return;const y={};for(const h of v)try{const b=await G.fetchBalance(h.exchange);y[h.exchange]=b.free||{}}catch(b){console.error(`Failed to fetch balance for ${h.exchange}:`,b)}c(y)}catch(v){console.error("Failed to refresh balances:",v)}},[d]),_=i.useCallback(async(v,y,h,b,w,E)=>{if(!d)return N.error("Trading engine not initialized"),null;g(!0);try{const R=await G.createOrder(v,y,b,h,w,E),ee=await Y.executeOrder(v,y,h,b,w,E||R.price);return t(ie=>[ee,...ie]),N.success(`Order executed: ${h.toUpperCase()} ${w} ${y} @ $${(E||R.price).toFixed(2)}`),await u(),await f(),ee}catch(R){return console.error("Order execution error:",R),N.error(`Failed to execute order: ${R.message}`),null}finally{g(!1)}},[d]),m=i.useCallback(async(v,y,h)=>{try{await G.cancelOrder(v,y,h),await Y.cancelOrder(y),t(b=>b.map(w=>w.id===y?{...w,status:"cancelled"}:w)),N.success("Order cancelled"),await f()}catch(b){console.error("Failed to cancel order:",b),N.error(`Failed to cancel order: ${b.message}`)}},[]),f=i.useCallback(async()=>{if(d)try{const v=await Y.getOrders();t(v)}catch(v){console.error("Failed to refresh orders:",v)}},[d]),S=i.useCallback((v,y="USDT")=>{var h;return((h=l[v])==null?void 0:h[y])||0},[l]),A=i.useCallback((v="USDT")=>{let y=0;return Object.values(l).forEach(h=>{y+=h[v]||0}),y},[l]);return{orders:o,positions:s,trades:a,balances:l,isExecuting:p,isInitialized:d,connectExchange:j,disconnectExchange:C,executeOrder:_,cancelOrder:m,refreshOrders:f,refreshBalances:u,getBalance:S,getTotalBalance:A}},Rt=({exchange:o,symbol:t,currentPrice:s})=>{const{executeOrder:r,isExecuting:a,getBalance:n}=Kt(),[l,c]=i.useState("market"),[p,g]=i.useState("buy"),[d,x]=i.useState(""),[j,C]=i.useState(s.toString()),[u,_]=i.useState(!1),[m,f]=i.useState("25"),S=n(o,"USDT"),A=()=>{if(u){const y=parseFloat(m)/100;return S*y/(l==="market"?s:parseFloat(j))}return parseFloat(d)},v=async()=>{const y=A();if(isNaN(y)||y<=0){N.error("Invalid amount");return}const h=l==="market"?void 0:parseFloat(j);if(l!=="market"&&(!h||isNaN(h))){N.error("Invalid price");return}const b=y*(h||s);if(p==="buy"&&b>S){N.error(`Insufficient balance. Required: ${b.toFixed(2)} USDT, Available: ${S.toFixed(2)} USDT`);return}try{await r(o,t,p,l,y,h),N.success(`${p.toUpperCase()} order executed successfully`),x(""),f("25")}catch(w){N.error(`Order execution failed: ${w instanceof Error?w.message:"Unknown error"}`)}};return e.jsxs(Ne,{className:"p-4 bg-gradient-to-br from-background to-primary/5 border-primary/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"text-lg font-bold",children:"Place Order"})]}),e.jsxs(le,{variant:"outline",className:"text-xs",children:[e.jsx(Ae,{className:"w-3 h-3 mr-1"}),S.toFixed(2)," USDT"]})]}),e.jsx(Se,{value:l,onValueChange:y=>c(y),className:"mb-4",children:e.jsxs(ke,{className:"grid w-full grid-cols-3",children:[e.jsx(J,{value:"market",children:"Market"}),e.jsx(J,{value:"limit",children:"Limit"}),e.jsx(J,{value:"stop",children:"Stop"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(P,{variant:p==="buy"?"default":"outline",onClick:()=>g("buy"),className:p==="buy"?"bg-success hover:bg-success/90":"",children:[e.jsx(M,{className:"w-4 h-4 mr-1"}),"Buy"]}),e.jsxs(P,{variant:p==="sell"?"default":"outline",onClick:()=>g("sell"),className:p==="sell"?"bg-destructive hover:bg-destructive/90":"",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Sell"]})]}),l!=="market"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"price",className:"text-xs",children:"Price (USDT)"}),e.jsx(L,{id:"price",type:"number",step:"0.01",value:j,onChange:y=>C(y.target.value),className:"h-9 text-sm"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(re,{htmlFor:"usePercentage",className:"text-xs",children:"Use % of Balance"}),e.jsx(ct,{id:"usePercentage",checked:u,onCheckedChange:_})]}),u?e.jsxs("div",{className:"space-y-2",children:[e.jsx(re,{htmlFor:"percentage",className:"text-xs",children:"Percentage (%)"}),e.jsx(L,{id:"percentage",type:"number",min:"1",max:"100",value:m,onChange:y=>f(y.target.value),className:"h-9 text-sm"}),e.jsx("div",{className:"flex gap-2",children:["25","50","75","100"].map(y=>e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>f(y),className:"flex-1 h-7 text-xs",children:[y,"%"]},y))})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(re,{htmlFor:"amount",className:"text-xs",children:["Amount (",t.replace("USDT",""),")"]}),e.jsx(L,{id:"amount",type:"number",step:"0.00001",value:d,onChange:y=>x(y.target.value),placeholder:"0.00",className:"h-9 text-sm"})]}),e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Order Type:"}),e.jsx("span",{className:"font-semibold uppercase",children:l})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Est. Cost:"}),e.jsxs("span",{className:"font-semibold",children:[(A()*(l==="market"?s:parseFloat(j)||0)).toFixed(2)," USDT"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Fee (0.1%):"}),e.jsxs("span",{className:"font-semibold",children:[(A()*(l==="market"?s:parseFloat(j)||0)*.001).toFixed(2)," USDT"]})]})]}),e.jsx(P,{onClick:v,disabled:a,className:`w-full ${p==="buy"?"bg-success hover:bg-success/90":"bg-destructive hover:bg-destructive/90"}`,children:a?"Executing...":e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-4 h-4 mr-1"}),p==="buy"?"Buy":"Sell"," ",t]})}),e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[e.jsx(Ee,{className:"w-3 h-3 inline mr-1"}),"Real trades executed on ",o]})]})]})},Lt=()=>{const[o,t]=i.useState([{id:"1",symbol:"BTCUSDT",condition:"above",price:7e4,active:!0},{id:"2",symbol:"ETHUSDT",condition:"below",price:3e3,active:!0}]),[s,r]=i.useState("BTCUSDT"),[a,n]=i.useState("above"),[l,c]=i.useState(""),p=()=>{if(!l||parseFloat(l)<=0){N.error("Please enter a valid price");return}const d={id:Date.now().toString(),symbol:s,condition:a,price:parseFloat(l),active:!0};t([d,...o]),c(""),N.success("Alert created!")},g=d=>{t(o.filter(x=>x.id!==d)),N.info("Alert deleted")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-chart-4"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Price Alerts"})]}),e.jsxs("div",{className:"space-y-2 p-3 rounded-lg bg-muted/20 border border-border",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(W,{value:s,onValueChange:r,children:[e.jsx(q,{className:"h-9",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(F,{value:"BTCUSDT",children:"BTC"}),e.jsx(F,{value:"ETHUSDT",children:"ETH"}),e.jsx(F,{value:"BNBUSDT",children:"BNB"}),e.jsx(F,{value:"SOLUSDT",children:"SOL"})]})]}),e.jsxs(W,{value:a,onValueChange:d=>n(d),children:[e.jsx(q,{className:"h-9",children:e.jsx(V,{})}),e.jsxs(H,{children:[e.jsx(F,{value:"above",children:"Above"}),e.jsx(F,{value:"below",children:"Below"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{type:"number",placeholder:"Price...",value:l,onChange:d=>c(d.target.value),className:"h-9"}),e.jsxs(P,{onClick:p,size:"sm",className:"gap-1",children:[e.jsx(tt,{className:"w-3 h-3"}),"Add"]})]})]}),e.jsx("div",{className:"space-y-2",children:o.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No alerts set"}):o.map(d=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30 border border-border hover:border-primary/30 transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d.condition==="above"?e.jsx(M,{className:"w-4 h-4 text-success"}):e.jsx(z,{className:"w-4 h-4 text-destructive"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-foreground",children:d.symbol.replace("USDT","")}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[d.condition," $",d.price.toLocaleString()]})]})]}),e.jsx(P,{variant:"ghost",size:"sm",onClick:()=>g(d.id),className:"h-7 w-7 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(rt,{className:"w-3 h-3 text-destructive"})})]},d.id))})]})},zt=()=>{const[o]=i.useState([{price:7e4,volume:125e4,type:"resistance",strength:"strong"},{price:68500,volume:85e4,type:"resistance",strength:"medium"},{price:66e3,volume:21e5,type:"support",strength:"strong"},{price:64500,volume:65e4,type:"support",strength:"weak"},{price:62e3,volume:18e5,type:"support",strength:"strong"}]),t=r=>{switch(r){case"strong":return"bg-primary/30 border-primary/50";case"medium":return"bg-chart-2/30 border-chart-2/50";case"weak":return"bg-muted/30 border-muted-foreground/30";default:return"bg-muted/30 border-border"}},s=r=>{switch(r){case"strong":return"w-full";case"medium":return"w-2/3";case"weak":return"w-1/3";default:return"w-1/2"}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4 text-chart-4"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Liquidity Zones"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-success"}),e.jsx("span",{className:"text-muted-foreground",children:"Support"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-destructive"}),e.jsx("span",{className:"text-muted-foreground",children:"Resistance"})]})]}),e.jsx("div",{className:"space-y-2",children:o.map((r,a)=>e.jsxs("div",{className:`p-3 rounded-lg border transition-all hover:scale-[1.02] ${t(r.strength)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r.type==="support"?e.jsx(M,{className:"w-3 h-3 text-success"}):e.jsx(z,{className:"w-3 h-3 text-destructive"}),e.jsxs("span",{className:"text-sm font-bold text-foreground",children:["$",r.price.toLocaleString()]})]}),e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded uppercase font-medium ${r.type==="support"?"bg-success/20 text-success":"bg-destructive/20 text-destructive"}`,children:r.type})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Volume"}),e.jsxs("span",{className:"text-foreground font-medium",children:["$",(r.volume/1e6).toFixed(2),"M"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px]",children:[e.jsx("span",{className:"text-muted-foreground",children:"Strength"}),e.jsx("span",{className:"text-foreground capitalize",children:r.strength})]}),e.jsx("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full bg-gradient-to-r ${r.type==="support"?"from-success to-success/50":"from-destructive to-destructive/50"} ${s(r.strength)} transition-all`})})]})]})]},a))}),e.jsx("div",{className:"p-3 rounded-lg bg-muted/20 border border-border text-xs text-muted-foreground",children:"💡 Zones are calculated based on volume profile and historical price action"})]})},Wt=()=>{const[o]=i.useState([{key:"B",description:"Quick Buy Order",category:"trading"},{key:"S",description:"Quick Sell Order",category:"trading"},{key:"Esc",description:"Cancel All Orders",category:"trading"},{key:"Space",description:"Toggle Chart Type",category:"chart"},{key:"1-7",description:"Switch Timeframes",category:"chart"},{key:"I",description:"Toggle Indicators",category:"chart"},{key:"H",description:"Toggle Heatmap",category:"navigation"},{key:"P",description:"Open Portfolio",category:"navigation"},{key:"W",description:"Open Watchlist",category:"navigation"},{key:"T",description:"Toggle Terminal",category:"navigation"},{key:"/",description:"Search Symbols",category:"navigation"},{key:"F",description:"Fullscreen Chart",category:"chart"}]),t=r=>{switch(r){case"trading":return"text-success";case"chart":return"text-chart-4";case"navigation":return"text-primary";default:return"text-muted-foreground"}},s=Array.from(new Set(o.map(r=>r.category)));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4 text-chart-4"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground uppercase tracking-wide",children:"Keyboard Shortcuts"})]}),e.jsx(Z,{className:"w-4 h-4 text-chart-4 animate-pulse"})]}),s.map(r=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`text-xs font-semibold uppercase tracking-wide ${t(r)}`,children:r}),e.jsx("div",{className:"space-y-1",children:o.filter(a=>a.category===r).map((a,n)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg bg-muted/30 border border-border hover:border-primary/30 transition-colors",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:a.description}),e.jsx("kbd",{className:"px-2 py-1 text-xs font-semibold text-foreground bg-background border border-border rounded",children:a.key})]},n))})]},r)),e.jsxs(P,{variant:"outline",size:"sm",className:"w-full gap-2",children:[e.jsx(nt,{className:"w-3 h-3"}),"Customize Hotkeys"]})]})},qt=i.lazy(()=>K(()=>import("./PortfolioTracker.1762519851985.BGFr9cnI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14])).then(o=>({default:o.PortfolioTracker}))),Vt=i.lazy(()=>K(()=>import("./AutoTradingSignals.1762519851985.D471gjr8.js"),__vite__mapDeps([15,1,2,3,4,5,10,7,11])).then(o=>({default:o.AutoTradingSignals}))),Ht=i.lazy(()=>K(()=>import("./SocialTrading.1762519851985.CPnqkZ3l.js"),__vite__mapDeps([16,1,2,3,4,5])).then(o=>({default:o.SocialTrading}))),Qt=i.lazy(()=>K(()=>import("./MarketScanner.1762519851985.BYvTyrd4.js"),__vite__mapDeps([17,1,2,3,4,5])).then(o=>({default:o.MarketScanner}))),Xt=i.lazy(()=>K(()=>import("./MarketSentiment.1762519851985.BtwbgAqx.js"),__vite__mapDeps([18,1,2,6,3,4,5])).then(o=>({default:o.MarketSentiment}))),Gt=i.lazy(()=>K(()=>import("./EconomicCalendar.1762519851985.CZkYY1hR.js"),__vite__mapDeps([19,1,2,3,4,5])).then(o=>({default:o.EconomicCalendar}))),Yt=i.lazy(()=>K(()=>import("./TradeJournal.1762519851985.B1OixzJe.js"),__vite__mapDeps([20,1,2,3,4,5])).then(o=>({default:o.TradeJournal}))),Pe=i.memo(({symbol:o,exchange:t,currentPrice:s,assetType:r,onSelectSymbol:a})=>e.jsxs("aside",{className:"glass-panel space-y-4 rounded-2xl p-5 shadow-2xl transition-all duration-300 hover:shadow-primary/10 animate-slide-in-right",children:[e.jsx(Tt,{}),e.jsx(ne,{}),e.jsxs(Se,{defaultValue:"trading",className:"w-full",children:[e.jsxs(ke,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"trading",children:"Trading"}),e.jsx(J,{value:"settings",children:"Settings"})]}),e.jsxs(Me,{value:"trading",className:"space-y-4 mt-4",children:[e.jsx(Ke,{onSelectSymbol:a,selectedSymbol:o}),e.jsx(Rt,{exchange:t,symbol:o}),e.jsx(pt,{}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(qt,{})}),e.jsx(Lt,{}),e.jsx(gt,{}),e.jsx(zt,{}),e.jsx(Wt,{}),e.jsx(xt,{}),e.jsx(ft,{}),e.jsx(Re,{exchange:t,symbol:o})]})]}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Vt,{})}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Ht,{})}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Qt,{})}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Xt,{})}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Gt,{})}),e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"h-48 w-full rounded-lg"}),children:e.jsx(Yt,{})}),e.jsx(ht,{})]}));Pe.displayName="RightSidebar";const ye={"1m":500,"5m":500,"15m":500,"1h":500,"4h":400,"1d":365,"1w":200},be={"1m":"1m","5m":"5m","15m":"15m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"};function Jt(o,t,s,r="15m"){const[a,n]=i.useState([]),[l,c]=i.useState(null),[p,g]=i.useState([]),[d,x]=i.useState(!1),j=i.useRef(null),C=i.useRef(null),u=i.useCallback(async()=>{try{x(!0);let f=[];if(o==="BINANCE"&&O.isConfigured()){const S=be[r],A=ye[r];f=await O.fetchKlines(t,S,A);const v=await O.fetchTicker(t);c(v.price)}else if(o==="STOCKS"&&Q.isConfigured()){f=await Q.getCandles(t,r);const S=await Q.getQuote(t);c(S.price)}else if(o==="FOREX"&&B.isConfigured()){f=await B.getCandles(t,r);const S=await B.getQuote(t);c((S.bid+S.ask)/2)}else{const S=ae[o],A=ye[r],v=be[r];let y=S.restKlines(t,A);o==="BINANCE"&&(y=y.replace(/interval=[^&]*/,`interval=${v}`));const h=await fetch(y);if(!h.ok)throw new Error(`HTTP ${h.status}`);const b=await h.json();o==="BINANCE"?f=b.map(w=>({x:w[0],y:[parseFloat(w[1]),parseFloat(w[2]),parseFloat(w[3]),parseFloat(w[4])]})):o==="OKX"?f=(b.data||b||[]).map(E=>({x:parseInt(E[0]),y:[parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3]),parseFloat(E[4])]})):o==="KUCOIN"?f=(b.data||b||[]).map(E=>({x:E[0]>1e12?E[0]:E[0]*1e3,y:[parseFloat(E[1]),parseFloat(E[2]),parseFloat(E[3]),parseFloat(E[4])]})):o==="COINBASE"&&(f=b.map(w=>({x:w[0]*1e3,y:[parseFloat(w[3]),parseFloat(w[2]),parseFloat(w[1]),parseFloat(w[4])]}))),f=f.map(w=>({x:w.x>1e12?w.x:w.x*1e3,y:w.y.map(E=>parseFloat(E.toString()))})),f.length>0&&c(f[f.length-1].y[3])}n(f),N.success(`Loaded ${f.length} candles from real API`)}catch(f){console.error("Failed to fetch candles:",f),N.error("Failed to load chart data")}finally{x(!1)}},[o,t,r]),_=i.useCallback(()=>{j.current&&j.current.close();try{if(o==="BINANCE"){const f=new WebSocket(ae.BINANCE.wsTrade(t));j.current=f,f.onopen=()=>{N.success("WebSocket connected")},f.onmessage=S=>{try{const A=JSON.parse(S.data),v=parseFloat(A.p||A.price),y=parseFloat(A.q||A.qty||0),h=A.T?Math.floor(A.T/1e3):Math.floor(Date.now()/1e3);v&&(c(v),g(b=>[{price:v,volume:y,timestamp:h*1e3,side:"buy"},...b.slice(0,99)]))}catch(A){console.error("WebSocket message error:",A)}},f.onerror=()=>{N.error("WebSocket error")},f.onclose=()=>{j.current=null}}}catch(f){console.error("WebSocket connection error:",f),N.error("Failed to connect WebSocket")}},[o,t]),m=i.useCallback(()=>{u(),C.current&&clearInterval(C.current),C.current=setInterval(()=>{u()},15e3)},[u]);return i.useEffect(()=>(u(),s==="ws"?_():m(),()=>{j.current&&j.current.close(),C.current&&clearInterval(C.current)}),[o,t,s,u,_,m]),{candles:a,lastPrice:l,trades:p,loading:d,refetch:u}}const Zt=i.lazy(()=>K(()=>import("./admin-dashboard.1762519851985.DenNkgL1.js"),__vite__mapDeps([21,1,2,3,4,5])).then(o=>({default:o.AdminPanel}))),we=i.memo(Te),er=i.memo(yt),tr=i.memo(Ie),rr=i.memo(Pe),sr=i.memo(dt),ar=()=>{const o=je(),[t,s]=i.useState(!1),[r,a]=i.useState(!1);i.useEffect(()=>{(async()=>{const{data:{session:U}}=await k.auth.getSession();if(!U){o("/auth");return}const{data:te}=await k.from("user_roles").select("role").eq("user_id",U.user.id).eq("role","admin").maybeSingle();s(!!te),te&&N.success("Admin Panel Erişimi Aktif",{description:"Yönetici özellikleri kullanıma hazır"})})()},[o]);const[n,l]=i.useState(localStorage.getItem("omni_exchange")||"BINANCE"),[c,p]=i.useState(localStorage.getItem("omni_symbol")||ce("BINANCE")[0].toLowerCase()),[g,d]=i.useState(localStorage.getItem("omni_source")||"ws"),[x,j]=i.useState(localStorage.getItem("omni_timeframe")||"15m"),[C,u]=i.useState(null),[_,m]=i.useState([]),[f,S]=i.useState("crypto"),[A,v]=i.useState({showSMA:!0,showEMA:!0,showRSI:!0,showMACD:!1,showBB:!1,showFib:!1,showPatterns:!0,smaPeriod:parseInt(localStorage.getItem("omni_sma")||"20"),emaPeriod:parseInt(localStorage.getItem("omni_ema")||"20"),rsiPeriod:parseInt(localStorage.getItem("omni_rsi")||"14")}),[y,h]=i.useState([]),b=i.useCallback((T,U="info")=>{h(te=>[{message:T,level:U,timestamp:new Date},...te.slice(0,199)])},[]),{candles:w,lastPrice:E,trades:R,refetch:ee}=Jt(n,c,g,x),ie=i.useMemo(()=>!A.showPatterns||w.length<10?[]:lt(w),[w,A.showPatterns]);i.useEffect(()=>{const T=ce(n).map(U=>U.toLowerCase());m(T),T.includes(c)||p(T[0])},[n]),i.useEffect(()=>{localStorage.setItem("omni_exchange",n),localStorage.setItem("omni_symbol",c),localStorage.setItem("omni_source",g),localStorage.setItem("omni_timeframe",x)},[n,c,g,x]),i.useEffect(()=>{E!==null&&C!==null&&b(`Price updated: $${E.toFixed(6)}`,"info"),u(E)},[E]),i.useEffect(()=>{b(`Trading terminal initialized - ${n} / ${c.toUpperCase()}`,"info")},[]);const $e=T=>{l(T);const U=ce(T);p(U[0].toLowerCase()),b(`Switched to ${T}`,"info"),N.success(`Switched to ${T}`)},ue=T=>{p(T),b(`Symbol changed to ${T.toUpperCase()}`,"info")},Fe=T=>{d(T),b(`Data source changed to ${T.toUpperCase()}`,"info"),N.info(`Using ${T.toUpperCase()} data source`)},Ue=()=>{ee(),b("Manual refresh triggered","info"),N.success("Data refreshed")},De=T=>{v(T),localStorage.setItem("omni_sma",T.smaPeriod.toString()),localStorage.setItem("omni_ema",T.emaPeriod.toString()),localStorage.setItem("omni_rsi",T.rsiPeriod.toString()),b("Indicators updated","info"),N.success("Indicators applied")};return r&&t?e.jsxs(e.Fragment,{children:[e.jsx(we,{onAdminClick:()=>a(!1),isAdmin:t}),e.jsxs("div",{className:"relative min-h-screen pt-24 p-4 animate-fade-in",children:[e.jsx(xe,{}),e.jsx("div",{className:"relative z-10 mx-auto max-w-[1800px] space-y-4",children:e.jsx("div",{className:"glass-panel-strong rounded-2xl p-6 animate-scale-in",children:e.jsx(i.Suspense,{fallback:e.jsx(D,{className:"w-full h-screen"}),children:e.jsx(Zt,{})})})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{onAdminClick:()=>a(!0),isAdmin:t}),e.jsxs("div",{className:"relative min-h-screen pt-24 p-4 animate-fade-in",children:[e.jsx(xe,{}),e.jsxs("div",{className:"relative z-10 mx-auto max-w-[1800px] space-y-4",children:[e.jsx("div",{className:"glass-panel-strong rounded-2xl p-4 neon-border-strong animate-slide-fade-down",children:e.jsx(er,{exchange:n,symbol:c,source:g,symbols:_,onExchangeChange:$e,onSymbolChange:ue,onSourceChange:Fe,onRefresh:Ue})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[380px_1fr_380px]",children:[e.jsx(tr,{symbols:_,activeSymbol:c,timeframe:x,indicatorSettings:A,detectedPatterns:ie,candles:w,lastPrice:E,logs:y,onSymbolClick:ue,onTimeframeChange:j,onApplyIndicators:De}),e.jsx(sr,{symbol:c,exchange:n,source:g,candles:w,trades:R,lastPrice:E,previousPrice:C,indicatorSettings:A}),e.jsx(rr,{symbol:c,exchange:n,currentPrice:E,assetType:f,onSelectSymbol:(T,U)=>{p(T.toLowerCase()),S(U)}})]})]})]})]})},jr=Object.freeze(Object.defineProperty({__proto__:null,default:ar},Symbol.toStringTag,{value:"Module"}));export{jr as I,vt as u};
