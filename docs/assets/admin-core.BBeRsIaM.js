import{j as e,m as Y}from"./vendor-features.6ISre1Wy.js";import{r as i,R as f}from"./vendor-core.BARHdY6Y.js";import{e as S,C as r,f as c,c as j,T as Z,a as q,b as x,d as p,g as n,h as d,I as ee,B as g,u as b}from"./trading-core.Bat-HQlx.js";import{o as se,t as _,w as te,T as ae,u as k,x as re,y as E,z as I,F as M,A as ce,G as le,H as ie,s as ne,v as de,I as oe,J as me,j as C,X as T,K as he}from"./trading-orders-wrapper.B234-snb.js";import"./vendor-ui.wR1y-iB2.js";const Ne=({user:xe})=>{const[z,F]=i.useState("overview"),[B,U]=i.useState([]),[D,N]=i.useState([]),[l,O]=i.useState({totalUsers:0,activeUsers:0,totalVolume:0,totalTokens:0,pendingRequests:0,systemUptime:0,serverLoad:0,databaseSize:0});i.useEffect(()=>{const s=async()=>{try{const{data:t,error:o}=await supabase.from("profiles").select("*");if(o)throw o;U(t||[]);const{data:u,error:L}=await supabase.from("token_requests").select("*").order("created_at",{ascending:!1});if(L)throw L;N(u||[]);const K=(t==null?void 0:t.filter(h=>h.last_active_at>new Date(Date.now()-24*60*60*1e3).toISOString()).length)||0,{data:w}=await supabase.from("trading_history").select("volume").gte("created_at",new Date(Date.now()-30*24*60*60*1e3).toISOString()),Q=(w==null?void 0:w.reduce((h,W)=>h+(W.volume||0),0))||0,{data:y}=await supabase.from("omni99_stats").select("total_supply, circulating_supply").single();O({totalUsers:(t==null?void 0:t.length)||0,activeUsers:K,totalVolume:Q,totalTokens:(y==null?void 0:y.circulating_supply)||0,pendingRequests:(u==null?void 0:u.filter(h=>h.status==="pending").length)||0,systemUptime:99.9,serverLoad:Math.floor(Math.random()*30)+20,databaseSize:Math.floor(Math.random()*5)+1})}catch(t){console.error("Error loading admin data:",t),b.error("Failed to load some admin data")}};s();const a=supabase.channel("admin-panel-updates").on("postgres_changes",{event:"*",schema:"public",table:"profiles"},s).on("postgres_changes",{event:"*",schema:"public",table:"token_requests"},s).subscribe();return()=>{a.unsubscribe()}},[]);const[v,P]=i.useState(""),[m,V]=i.useState("all"),$=s=>{N(a=>a.map(t=>t.id===s?{...t,status:"approved"}:t)),b.success("Token purchase approved!")},H=s=>{N(a=>a.map(t=>t.id===s?{...t,status:"rejected"}:t)),b.success("Token purchase rejected!")},G=(s,a)=>{U(t=>t.map(o=>o.id===s?{...o,status:a}:o)),b.success(`User status updated to ${a}!`)},A=s=>{switch(s){case"active":return"text-green-400 bg-green-500/20";case"suspended":return"text-red-400 bg-red-500/20";case"pending":return"text-yellow-400 bg-yellow-500/20";case"approved":return"text-green-400 bg-green-500/20";case"rejected":return"text-red-400 bg-red-500/20";default:return"text-gray-400 bg-gray-500/20"}},R=s=>{switch(s){case"active":return C;case"suspended":return T;case"pending":return k;case"approved":return C;case"rejected":return T;default:return k}},J=B.filter(s=>{const a=s.email.toLowerCase().includes(v.toLowerCase()),t=m==="all"||s.status===m;return a&&t}),X=D.filter(s=>{const a=s.email.toLowerCase().includes(v.toLowerCase()),t=m==="all"||s.status===m;return a&&t});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-gray-400",children:"Comprehensive system management and oversight"})]}),e.jsxs(S,{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white border-0",children:[e.jsx(se,{className:"h-4 w-4 mr-1"}),"Administrator"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Total Users",value:l.totalUsers.toLocaleString(),change:"+12%",icon:_,color:"from-blue-500 to-cyan-500"},{title:"Active Users",value:l.activeUsers.toLocaleString(),change:"+8%",icon:te,color:"from-green-500 to-emerald-500"},{title:"Trading Volume",value:`$${(l.totalVolume/1e6).toFixed(1)}M`,change:"+23%",icon:ae,color:"from-purple-500 to-pink-500"},{title:"Pending Requests",value:l.pendingRequests.toString(),change:"+5",icon:k,color:"from-orange-500 to-red-500"}].map((s,a)=>e.jsx(Y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},children:e.jsx(r,{className:"bg-black/30 border-white/20 hover:bg-black/40 transition-all duration-200",children:e.jsxs(c,{className:"p-6",children:[e.jsx("div",{className:j("w-12 h-12 rounded-xl bg-gradient-to-r mb-4 flex items-center justify-center",s.color),children:f.createElement(s.icon,{className:"h-6 w-6 text-white"})}),e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:s.title}),e.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:s.value}),e.jsx("p",{className:"text-sm text-green-400",children:s.change})]})})},s.title))}),e.jsxs(Z,{value:z,onValueChange:F,className:"space-y-6",children:[e.jsxs(q,{className:"bg-black/30 border border-white/20",children:[e.jsxs(x,{value:"overview",className:"data-[state=active]:bg-white/20",children:[e.jsx(re,{className:"h-4 w-4 mr-2"}),"Overview"]}),e.jsxs(x,{value:"users",className:"data-[state=active]:bg-white/20",children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Users"]}),e.jsxs(x,{value:"tokens",className:"data-[state=active]:bg-white/20",children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Token Requests"]}),e.jsxs(x,{value:"system",className:"data-[state=active]:bg-white/20",children:[e.jsx(I,{className:"h-4 w-4 mr-2"}),"System"]}),e.jsxs(x,{value:"settings",className:"data-[state=active]:bg-white/20",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),"Settings"]})]}),e.jsx(p,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsxs(d,{className:"text-white flex items-center",children:[e.jsx(ce,{className:"h-5 w-5 mr-2 text-green-400"}),"System Health"]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Uptime"}),e.jsxs("span",{className:"text-green-400 font-semibold",children:[l.systemUptime,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Server Load"}),e.jsxs("span",{className:"text-yellow-400 font-semibold",children:[l.serverLoad,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Database Size"}),e.jsxs("span",{className:"text-blue-400 font-semibold",children:[l.databaseSize," GB"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Active Connections"}),e.jsx("span",{className:"text-purple-400 font-semibold",children:"1,247"})]})]})]}),e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsxs(d,{className:"text-white flex items-center",children:[e.jsx(le,{className:"h-5 w-5 mr-2 text-orange-400"}),"Recent Activity"]})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:[{action:"New user registration",user:"user@example.com",time:"2 min ago",type:"user"},{action:"Token purchase approved",user:"trader@example.com",time:"5 min ago",type:"token"},{action:"Large trade executed",user:"whale@example.com",time:"8 min ago",type:"trade"},{action:"System backup completed",user:"System",time:"15 min ago",type:"system"}].map((s,a)=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-white/5 rounded-lg",children:[e.jsx("div",{className:j("w-2 h-2 rounded-full",s.type==="user"?"bg-blue-400":s.type==="token"?"bg-orange-400":s.type==="trade"?"bg-green-400":"bg-purple-400")}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-white",children:s.action}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.user," • ",s.time]})]})]},a))})})]})]})}),e.jsxs(p,{value:"users",className:"space-y-6",children:[e.jsx(r,{className:"bg-black/30 border-white/20",children:e.jsx(c,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(ee,{placeholder:"Search users...",value:v,onChange:s=>P(s.target.value),className:"pl-10 bg-white/10 border-white/20 text-white"})]}),e.jsxs("select",{value:m,onChange:s=>V(s.target.value),className:"px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"suspended",children:"Suspended"}),e.jsx("option",{value:"pending",children:"Pending"})]}),e.jsxs(g,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:[e.jsx(ne,{className:"h-4 w-4 mr-2"}),"Export"]})]})})}),e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsx(d,{className:"text-white",children:"User Management"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:J.map(s=>{const a=R(s.status);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-bold text-white",children:s.email.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:s.email}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Joined ",s.joinDate," • Last active ",s.lastActive]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-white",children:["$",s.balance.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-400",children:[s.tokens," OMNI99"]})]}),e.jsxs(S,{className:j("px-2 py-1",A(s.status)),children:[f.createElement(a,{className:"h-3 w-3 mr-1"}),s.status]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(g,{size:"sm",variant:"outline",className:"border-white/20 text-white hover:bg-white/10",children:e.jsx(de,{className:"h-3 w-3"})}),e.jsx(g,{size:"sm",variant:"outline",onClick:()=>G(s.id,s.status==="active"?"suspended":"active"),className:"border-white/20 text-white hover:bg-white/10",children:s.status==="active"?e.jsx(oe,{className:"h-3 w-3"}):e.jsx(me,{className:"h-3 w-3"})})]})]})]},s.id)})})})]})]}),e.jsx(p,{value:"tokens",className:"space-y-6",children:e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsxs(n,{children:[e.jsx(d,{className:"text-white",children:"Token Purchase Requests"}),e.jsx("p",{className:"text-gray-400",children:"Review and approve OMNI99 token purchases"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:X.map(s=>{const a=R(s.status);return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:s.email}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.amount," tokens • $",s.total.toFixed(2)," • ",s.date]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(S,{className:j("px-2 py-1",A(s.status)),children:[f.createElement(a,{className:"h-3 w-3 mr-1"}),s.status]}),s.status==="pending"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(g,{size:"sm",onClick:()=>$(s.id),className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx(C,{className:"h-3 w-3 mr-1"}),"Approve"]}),e.jsxs(g,{size:"sm",variant:"outline",onClick:()=>H(s.id),className:"border-red-500 text-red-400 hover:bg-red-500/20",children:[e.jsx(T,{className:"h-3 w-3 mr-1"}),"Reject"]})]})]})]},s.id)})})})]})}),e.jsx(p,{value:"system",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsx(d,{className:"text-white",children:"System Monitoring"})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(I,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"System monitoring dashboard"})]})})]}),e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsx(d,{className:"text-white",children:"Database Management"})}),e.jsx(c,{className:"space-y-4",children:e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx(he,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"Database administration tools"})]})})]})]})}),e.jsx(p,{value:"settings",className:"space-y-6",children:e.jsxs(r,{className:"bg-black/30 border-white/20",children:[e.jsx(n,{children:e.jsx(d,{className:"text-white",children:"System Settings"})}),e.jsx(c,{children:e.jsxs("div",{className:"text-center text-gray-400 mt-20",children:[e.jsx(M,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"System configuration panel"})]})})]})})]})]})};export{Ne as default};
